"issuekey","type","components","storypoint","title","description_text"
"MDL-54984","Task","General",1,"Final deprecation / removal of MUC stuff deprecated in 2.6","""From [~mr-russ], in devs chat:    {quote}  As a current example, the MUC is_persist set of functions was deprecated in 2.6, and is still there.  At what point is it possible to remove it?  {quote}    It seems that we missed those (have not found them in this epic list), and there are a number of them:    {code}  $ ag  'deprecated since 2.'  classes/definition.php  251:     * @deprecated since 2.9  848:     * @deprecated since 2.6  878:     * @deprecated since 2.6    classes/store.php  269:     * @deprecated since 2.5    classes/loaders.php  954:     * @deprecated since 2.6  976:     * @deprecated since 2.6  1003:     * @deprecated since 2.6  1058:     * @deprecated since 2.6  1109:     * @deprecated since 2.6    tests/fixtures/lib.php  299: * @deprecated since 2.9  {quote}    Ciao :-)"""
"MDL-55126","Task","Files API",1,"Deprecated get_records_csv() and put_records_csv()","""While searching for php 7.1 incompatible code I found methods get_record_csv() and put_records_csv() that are never used, have some debug echo and also use \r\n as the line separator....     We need to deprecate them"""
"MDL-55192","Task","Logging",1,"Final deprecation of add_to_log()","""It's been deprecated since 2.7. """
"MDL-56223","Bug","Calendar|Logging",3,"CLI Calendar Event Updated/Created bug affecting database/logs","""Moodle v3.0.3+ (Build: 20160324)    We were seeing some CPU spikes and overloaded php-fpm threads which seemed to be affecting one of our nodes making it unresponsive (we have 3).    Further research looks like it may be related to random calendar events in the logs. They are intermittent with approx 1071 transactions per second occurring intermittently (looks like about every hour and 15 mins).      They are always related to the same user with Calendar Event Updated/Created    User full name: Administrator  Affected user: name of one specific user  Event context: User: same user as above  Component: system  Event name: Calendar event updated/created  Origin: cli    Is this related to https://tracker.moodle.org/browse/MDL-46539 ?  """
"MDL-56789","Bug","Administration|Course",1,"Recycle bin warns of pending grade items being deleted even if no grade items are being deleted.","""At the moment, when any module (or resource) is deleted (via the recycle bin) the gradebook will display a warning that grade items are pending deletion. This is regardless of whether the deleted item has any grade items to delete or even uses the gradebook."""
"MDL-57487","Task","Dashboard (My home)",1,"Final deprecation of xxx_print_overview() and related functions","""These were deprecated in -MDL-57434- (please check the commit as a WS was also deprecated).    Also, please remove the strings from the activity modules that are only used by these deprecated functions."""
"MDL-57618","Task","General",1,"Remove strings deprecated in 3.3","""Remove strings from language files under the heading """"Deprecated in Moodle 3.3"""" and the respective lines in deprecated.txt files    See also https://docs.moodle.org/dev/String_Deprecation  """
"MDL-57632","Task","Filters",1,"Final deprecation of media_manager::setup()","""Final deprecation of media_manager::setup(). It was deprecated in MDL-57316"""
"MDL-57678","Bug","Administration",0,"Select categories widgets does not properly handle &nbsp; entities","""We have found a minor regression of MDL-55564 which we stumbled upon while working on one of our plugins but which can also be seen on /admin/settings.php?section=enrolsettingsldap:    * There is a settings widget to display a list of categories. The content of the widget is fetched from make_categories_options() in /course/lib.php. The function returns a list of categories which is indented by entities.  * In 3.2, the list of categories is not correctly indented anymore because the  entities arrive in the browser as  (tested in theme_boost and theme_clean).  * According to [~davosmith] who investigated this problem for us,   {quote}the reason for the output is MDL-55564 - all the admin settings are now output via templates, which means that the code is automatically cleaned to escape any potentially bad characters (& < >). Unfortunately, this leads to the spaces becoming double-encoded in this case.{quote}    In our plugin, we will handle this problem as an intermediate solution by using    before creating the settings widget (as a reference for the reviewer: https://github.com/moodleuulm/moodle-local_resort_courses/blob/master/settings.php#L64), but it would be nice if this problem could be investigated by Moodle HQ as the function make_categories_options() is designed to output the list indented, but the template rendering doesn't seem to be compatible anymore.    Thanks,  Alex"""
"MDL-57682","Bug","JavaScript|Media|Performance",0,"Videojs sends full lang strings for plugin on every page","""Every page now contains a huge chunk of JS params to feed the language pack to videojs.     I have been working hard to get rid of JS bloat from every page and this is a step backwards.    """
"MDL-58203","Improvement","Blocks|Dashboard (My home)",1,"Allow a per user ordering of the courses in the myoverview dashboard","""A user should be able to change the ordering of the courses in the """"sort-by-courses"""" view of the myoverview block by dragging them into a different order.    The ordering should be stored on a per user basis.    edit: suggestion from linked issue that sort order should be matched in the """"My courses"""" listing"""
"MDL-58253","Bug","Forms Library|Themes",5,"Boost breaks javascript form validation","""The Boost theme does not set id property for some form elements. Therefore, client-side validation fails on some occasions.    Example:       {code:php}$items = ['' => 'Select', '1' => 'Item 1', '2' => 'Item 2'];  $mygroup = [];  $mygroup[] = $form->createElement('select', 'myselect', null, $items);  $mygroup[] = $form->createElement('link', 'mylink', null, '#', 'Click here');  $form->addGroup($mygroup, 'mygroup', 'Select set');  $form->addGroupRule('mygroup', array('myselect' => array(array(null, 'required', null, 'client'))));    as there is no element with that element id in the page.    This is fine in More or any other non-Boost based themes."""
"MDL-58584","Bug","Database SQL/XMLDB|Performance",0,"Deleting a temporary table forces a reload of the databasemeta cache","""-MDL-51374- introduced new behavior with temporary tables and the database cache; the creation and deletion of temporary tables isn't supposed to force a cache reload. This works on table creation but not deletion. The issue is that the temporary table is unlisted as such before the cache is reset, so the cache reset code doesn't know it was a temporary table and resets the whole cache. This leads to performance issues if you're running a job which creates and deletes numerous temporary tables, such as mass-creation of backups.    This is the order of operations when deleting a temporary table:   # database_manager->drop_table()   ## sql_generator->getDropTableSQL()   ### moodle_temptables->delete_temptable()   ## database_manager->execute_sql_arr()   ### moodle_database->change_database_structure()   #### moodle_database->reset_caches()    To get the desired behavior I think the code in delete_temptable() needs to fire after the cache is reset. While examining my development environment I saw SHOW TABLE queries and column parsing after every backup and restore operation."""
"MDL-59502","Task","Global search",3,"Deprecate search engines add_documents implementations returning 4 arguments","""In MDL-59039 we introduced changes to add_documents, now this method should return an extra $partial boolean. We still support implementations returning 4 elements but not forever, this issue is about removing this 4 returned elements compatibility."""
"MDL-59524","Task","Other",1,"Remove strings deprecated in 3.4","""Remove strings from language files under the heading """"Deprecated in Moodle 3.4"""" and the respective lines in deprecated.txt files    See also https://docs.moodle.org/dev/String_Deprecation    """
"MDL-59639","Improvement","Themes|Usability",1,"Browser back button should work as expected in the administration menu with Boost theme","""A well known 'rule' of the web is not to compromise the functionality the browser's back button    Unfortunately, the admin pages do this.     To reproduce....   * From the flat menu, choose site administration   * Select (for example) Appearance tab and then theme settings   * The theme settings form appears.    * Press 'back'    You would expect to be back to the previous page - the Appearance tab. However, you are not. You are viewing the first tab of the administration menu. """
"MDL-60013","Task","JavaScript",1,"Final deprecation for core/modal_confirm","""Phase 2 deprecation for the core/modal_confirm AMD module."""
"MDL-60126","Bug","Competencies",1,"Competency user data is not being erased when user gets deleted","""All the CBE related user data is not removed when the user gets deleted. We need to discuss and decide if all user data should be removed or just the data the user has added (eg. evidence).    We should also consider deleting the users files related to competencies (eg. evidence files) and then in the upgrade add an adhoc step to be called which deals with the deletion.    Please read comments on MDL-59994."""
"MDL-60817","Improvement","Assignment|Filepicker",1,"Notify the user when the original file extension has been removed or modified upon file editing in the filepicker","""Quite commonly, users remove the document file extension when editing the filename in the filepicker, without being aware of that.    In some specific cases, for ex. students editing the name of an existing assignment submission file, if the extension is removed or modified it can cause failure in the document conversion in the assignment.    Improving the UX in the filepicker, by notifying the users when the original file extension has been modified would greatly reduce these occurrences."""
"MDL-60827","Bug","Authentication",3,"OAuth 2 still expecting email verification after ""Require email verification"" has been disabled","""Some users when they try to login on moodle receive the fallowing massage """" This account is pending email confirmation. """" even if I have the setting Site administration -> Server -> Oauth 2 Services -> Require email verification ( Unchecked ). It seems that users don't find the confirmation mail ( probably ended up in spam and was delete ). Is it possible to resend the confirmation email ? or any other way to solve this problem ?    The authentication method is by using OAuth 2 Google service  """
"MDL-60856","Task","Automated functional tests (behat)",1,"Remove behat steps deprecated in 3.5","""go through lib/tests/behat/behat_deprecated.php and remove steps that were deprecated in Moodle 3.5 (or earlier)    please add to the description if you know of any other deprecated behat functionality outside of this file that needs to be removed"""
"MDL-61390","Bug","Accessibility|Forum",0,"Forum: Heading structure on Search results page","""*Incorrect Heading structure on Search Results page*    Description: The headings on the search results page when searching forums do not correctly use heading levels to convey the hierarchy/structure of hte page. Currently “Search Results” is displayed as a heading level 3 with individual search result items as heading level 2.    Steps to replicate:   # Open a forum   # Search the forum for a known present search term   # View the headings list on the search results page"""
"MDL-61389","Bug","Accessibility|Forum",0,"Forum: ""Discuss this topic"" accessibility","""*""""Discuss this topic"""" links are not descriptive and do not have programmatically associated context*    Applies to: WCAG 2.0 A 2.4.4 """"Link purpose (in context)""""    Description: The links used to open discussion topics are labelled """"Discuss this topic"""", which is not descriptive. There is no programmatically associated context announced with this link.    Steps to replicate:  # Create a forum with the type """"{{Standard forum displayed in a blog-like format}}""""   # Create a discussion.   # Start JAWS or NVDA   # Open the links list (Insert+F7)   # Locate the """"Discuss this topic"""" links presented in the links list. Note that it is not possible to determine from the links list which topic will be opened by activating these links."""
"MDL-61649","Improvement","Authentication|Email",1,"Several core emails provide only text format","""Some core emails (see list below) only provide the email_to_user function with a text format message rather than providing the (currently optional) HTML message as well.    This has two drawbacks:    1) Users who opt to receive HTML emails, will sometimes (with no obvious pattern) recieve text emails from their Moodle site which might make them wonder if their settings are correct and/or if these messages are really coming from their Moodle. Many of these messages are around authentication, so that confidence is probably important.    2) Sites that use the new email wrapping mustache templates core/html_email.mustache will have these text only emails automatically converted to HTML, which works fine for text only content, but anything with a link in it will no longer be clickable, just displayed as text.     $autohtml = trim(text_to_html($messagetext));    Possible areas to improve:    lib/authlib.php  781=function login_lock_account($user) \{  822:            email_to_user($user, $supportuser, $subject, $message);    lib/classes/task/send_failed_login_notifications_task.php  29=class send_failed_login_notifications_task extends scheduled_task \{  177:                email_to_user($admin, \core_user::get_noreply_user(), $subject, $body);    lib/moodlelib.php  6100=function setnew_password_and_mail($user, $fasthash = false) \{  6129:    return email_to_user($user, $supportuser, $subject, $message);  6139=function reset_password_and_mail($user) \{  6173:    return email_to_user($user, $supportuser, $subject, $message);  6232=function send_password_change_confirmation_email($user, $resetrecord) \{  6252:    return email_to_user($user, $supportuser, $subject, $message);  6262=function send_password_change_info($user) \{  6282:        return email_to_user($user, $supportuser, $subject, $message);  6303:    return email_to_user($user, $supportuser, $subject, $message);    user/edit.php  273:        if (!$mailresults = email_to_user($tempuser, $noreplyuser, $emailupdatetitle, $emailupdatemessage)) \{         Possibly it's worth considering making the HTML format non-optional."""
"MDL-62497","Improvement","JavaScript",1,"Add a new transpilation tool for ES6","""Need to look at a transpilation tool for ES6.  It would be _nice_ if it transpiled to and AMD module, and took precedent over the existing AMD modules if there is a name clash.  This way we can migrate existing AMD code to ES6 native, without breaking existing AMD modules using that code."""
"MDL-62609","Task","Language",1,"Remove strings deprecated in 3.6","""Remove strings from language files under the heading """"Deprecated in Moodle 3.6"""" and the respective lines in deprecated.txt files    See also https://docs.moodle.org/dev/String_Deprecation  """
"MDL-62711","Bug","Themes",3,"Modal action buttons are now centered with additional spacing","""There are examples of dialogues working in different ways in the past - so what really needs to happen is a decision should be made on how action buttons for a modal should work and this should apply to every modal in Moodle with some useful checking of many different modals to confirm that this is the intended behaviour.     MDL-62160 is related in that this issue changed the behaviour for everything to comply with a quiz specific modal - but this affects all of Moodle and needs proper discussion and agreement.     Here is an example of a badly displaying modal which was fine before.    !image-2018-06-14-09-20-41-093.png!"""
"MDL-63032","Task","Calendar|Libraries",3,"CLONE - Update windows timezone list in core_date","""   Update lib/classes/date.php badzones to the latest time zone information.    https://support.microsoft.com/en-us/help/973627/microsoft-time-zone-index-values should translate over to http://php.net/manual/en/timezones.php    Use the IANA timezone information database - https://www.iana.org/time-zones      Please create a clone of this issue for next version before closing this"""
"MDL-63048","Task","General",3,"CLONE - Remove old class renames","""core_component looks for COMPONENT/db/renamedclasses.php files, it allows us to avoid traumatic transitions and BC breakages by listing classes that have been removed.    We need to clean the list at some point."""
"MDL-63070","Task","Forms Library|Libraries",2,"QuickForms library upgrade","""This is long overdue. We should at least be using the final version of the library from git, patched appropriately with those changes made already in our history."""
"MDL-63127","Improvement","Caching",1,"Redis Cache: implement compression","""Based on https://tracker.moodle.org/browse/MDL-59880    Implements GZIP compression for data before sending it to Redis."""
"MDL-63252","Bug","Database SQL/XMLDB",0,"XMLDB check defaults returns false warnings ","""Hi,    When we use tool """"_Site administration / Development / XMLDB editor / Check Defaults"""" ,_ it returns false warnings with some integer values.    Sample :   * Table: question. Field: defaultmark, Expected '1' Actual '1.0000000'   * Table: question_answers. Field: fraction, Expected '0' Actual '0.0000000'   * Table: question_attempts. Field: maxfraction, Expected '1' Actual '1.0000000'   * Table: grade_items. Field: grademax, Expected '100' Actual '100.00000'   * .....    This problem is not present in an old version of Moodle (3.1.5)    After searching in source, I found a difference in file  $WWWROOT/admin/tool/xmldb/actions/check_defaults/check_defaults.class.php (line 97)    In Moodle 3.5 , the test is :     In Moodle 3.1 it was:    I suppose that the problem comes from the test  """" != """" tests only the value , """" !== """" tests the value and type         I try to change """" !== """" to """" != """" in my Moodle 3.5 and get no warnings    Thanks a lot"""
"MDL-63261","Task","Messages|Web Services",1,"Final deprecation of web services in message/externallib.php","""A whole bunch were deprecated due to MDL-57272 and MDL-63676. Do a grep for 'MDL-63261' in the codebase to find out what can be removed."""
"MDL-63285","Bug","Calendar",3,"Slow fetching of calendar events","""One of our plugins (block_semester_sortierung) started experiencing very slow loading times after the events API was rewritten. After doing some optimizations in the plugin, it was found that the bottleneck of the event fetching lies in the     {\{\core_calendar\local\event\strategies\raw_event_retrieval_strategy::get_raw_events_legacy_implementation(...) }}    function, more specifically, in the sql subquery which is used to fetch unique events with minimum priority. The problem seems to be that the subquery performs a search in all of the user(s) courses, regardless whether a list of course ids was already supplied as a parameter to get_raw_events_legacy_implementation(..). With users that have a lot of courses (e.g. professors at universities) with a lot of events, this results in very slow fetching of events even for a single course (because the subquery matches against all of the user courses).     The bug is hard to reproduce, because it requires a user who is enroled in many courses, and the courses need to have events in them. Here is the that triggers the bug:    I have given as affected versions 3.5 and 3.5.1, because the function\{{ get_raw_events_legacy_implementation(..)}} was reworked quite a bit between 3.4 and 3.5; however, it still didn't fix the slow loading issue.     Here is a patch that fixes this problem:     [^event_fetch.patch]    All it does is when an array of courseids is provided as a parameter, the same list is used for the subquery too, and not the whole user course list.     Related issues:    https://tracker.moodle.org/browse/MDL-60402   https://tracker.moodle.org/browse/MDL-59438     """
"MDL-63580","Improvement","Tasks",3,"Deprecate dupe cron_run_single_task() function","""Working on MDL-60514 we created a new class that does cron_run_single_task() never used again in the core."""
"MDL-63612","New Feature","Blocks|Course|Themes",3,"Course card pattern colours may be specified by an admin","""In MDL-63337 the course colour hex values were move to the course_summary_exporter.php in course/classes/external    These colours should be configurable form a location like the themes or global theme settings."""
"MDL-64494","Bug","Accessibility",8,"Contrast of colours for success, info, error and warnings text is not accessible","""The success, error, warning and info text classes default colours from Bootstrap are not accessible. WAVE accessibility checker reports:    """"Very low contrast between foreground and background colors.""""    This affects all pages using the Bootstrap success, error, warning and info classes including the performance info in the footer of each page and all """"notifications"""" using a Bootstrap alert."""
"MDL-64821","Improvement","Forum",1,"Create new discussion view for forum","""Create a new discussion view mode that matches the prototype.    Prototype:  https://projects.invisionapp.com/share/2ATP7L7JYXP#/screens/381579783  (previously https://projects.invisionapp.com/share/9GQ8R2O3H7J#/screens/350489133)    h4. Beyond scope of this issue:  * Discussion header content (e.g. subscribed button, settings, view selector, move discussion selector etc) can all remain as is for now  * Badges images being moved into a modal. For this issue they can just be rendered under the user image as they are in the other views  * Emoji reactions  * The top header part of the prototype with filters, grading, settings etc    h4. Acceptance criteria  * UI should match the prototype as closely as possible  * All content for posts should be included when enabled, e.g. attachments, word counts, ratings etc  * Accessibility should not be made worse, i.e. keyboard navigation, contrast ratios, screen reader labels etc"""
"MDL-64887","Task","Themes",1,"Update bootstrap to version 4.3.1","""Update the Bootstrap JS and SASS to version 4.3.1"""
"MDL-65016","Improvement","Authentication|Libraries",1,"Many emails are sent if refreshing the OAuth2 token of a system account fails","""In the context of OAuth2, if the token of a system account cannot be refreshed for some reason, all( ! ) administrators get an hourly( ! ) notification about this problem.    There may be several reasons that can lead to this, including a) the refresh token has expired for some reason, b) authorisation has been revoked in the target system, c) the target system is not reachable (e.g., in maintenance). In either case, it is necessary to look into this. However, not every admin has to do this; in our case, most of them don't even know what this means...    (By the way, the """"hourly"""" part is fine. It's just that not everyone needs to be informed. The main administrator should be sufficient. For example, our main administrator's emails are managed by an issue tracker, which we use to assign tickets to the intended person. Others may use the main admin's email to forward the notification accordingly.)    Expected behaviour:  Only the main administrator gets emails informing about the failure."""
"MDL-65083","Bug","Themes",3,"Update uses of pull-xs-right","""Due to updates to bootstrap - the pull-xs-right no longer has the """"float: right"""" effect and places where this is used now look misaligned.    fa-pull-right, pull-right and float-right do currently work on boost.    float-right comes from the current version of bootstrap (theme specific)    fa-pull-right is from font awesome (theme specific)    pull-right is in the bootstrap 2 compatibility file and works on all themes.     pull-right seems like the safest option since it has been supported for a long time in Moodle and we can updated it in a single place if it needs changing due to theme changes.     """
"MDL-65105","Task","Accessibility|Themes",3,"Determine setup of dark navbar for Classic theme","""The dark navbar has insufficient contrast (fails WCAG). There are a few different approaches we can take, depending how we want custom business colours to work, and the style defaults."""
"MDL-65151","Task","Course",1,"Final deprecation of section_edit_controls() in course/format/renderer.php","""section_edit_controls() in course/format/renderer.php was deprecated in 3.0 (MDL-48947). It should be removed now.     """
"MDL-65205","Improvement","HTML and CSS|Messages|Themes",3,"Messaging interface assumes secondary color is light shade","""The messaging interface in Boost uses bg-secondary behind some text but assumes that it's a pale shade, since it puts hardcoded gray and dark gray text on top of it.    The text colors should use color-yiq functions to ensure they are readable if the secondary color is set to something else."""
"MDL-65221","Improvement","Messages",1,"Add behat test for new UI to manage messaging notification preferences","""Feature  In order to be notified of messages  As a user  I need to be able to update my messaging notification preferences    Scenario    Update notification preferences: Email"""
"MDL-65219","Bug","Messages",3,"Broken link in messages contact request notification","""Hi,    We notice a very small problem in contact request notification   * User A send a contact request to user B   * User B click on notifications icon , then on the link """"View full notification""""   * At the bottom of the page, the link """"Go to"""" is broken (file not found)    message/classes/api.php :   line 2511 : $url = new \moodle_url('/message/pendingcontactrequests.php');    but file ../message/pendingcontactrequests.php don't exist    I saw in MDL-63310 :  """"Don't forget to remove the stub page message/pendingcontactrequests.php""""    Thanks a lot"""
"MDL-65298","Task","JavaScript",3,"Remove titlestr and titlecomponent from replaceSectionActionItem and replaceActionItem methods in course/amd/src/actions.js","""In MDL-64819 the titlestr and titlecomponent from replaceSectionActionItem and replaceActionItem methods in course/amd/src/actions.js are not used anymore. For now, a comment has been added to the replaceActionItem jsdoc, but some deprecation process should be raised for them to make sure the legacy code is cleaned at some point."""
"MDL-65453","Bug","Administration",0,"Admin CLI install script prompts for values that it doesn't use when the skip-database option is given","""The {{admin/cli/install.php}} script still prompts the user for values such as the site short name, full name, admin email address, admin password even when it's run with the {{--skip-database}} flag.    This is confusing for the user because those values are only set as part of the database install. This means that when {{--skip-database}} is set the values aren't actually saved anywhere even though the user provides them.    Instead the user must set them again when running the {{admin/cli/install_database.php}} script or the admin can do it when the log into the site.    The install script probably shouldn't prompt the user for those values if the {{--skip-database}} flag is given."""
"MDL-65546","Bug","Course",5,"Name of sections or mods are not displayed correctly after some drag and drop in a course in pop-up dialog","""Issue : discover during Moodle 3.7 QA test (MDLQA-13201). We notice the same bug in previous version of Moodle on Boost and clean theme.    When we move mods or sections in a course using drag and drop, titles are not displayed correctly in the pop-up dialog. The problem persists even after refreshing the page :    * If we drag and drop a mod, the title of the mod isn't displayed in the pop-up dialog (before and after we refresh page)   * If we create a new section, name of the new section isn't always displayed in the pop-up dialog   * If we drag and drop a section, order of sections in the pop-up dialog isn't update.           """
"MDL-65593","Improvement","Forum",1,"Remove unused styles from mod/forum/styles.css","""We've changed the forum structure a lot and relied more on the Bootstrap 4 classes which has left a lot of unused CSS in mod/forum/styles.css that can be deleted."""
"MDL-65620","Bug","Messages",3,"Default notification preferences are unset by default","""Only Permitted/Locked/Disallowed values are kept when admins disabled a notification provider.     All default values should be kept when a provider is disabled to recover them in case the provider is enabled again."""
"MDL-65668","Bug","Installation|Roles / Access",0,"plugins which assign new capabilities cannot be upgraded/installed","""During plugin installation, new capabilities (defined in db/access.php) are created only after db/install.php is run. As a consequence of https://tracker.moodle.org/browse/MDL-64971, if we call assign_capability() in the install script, the function will throw an error because the capability does not yet exist in the database.    As a result, any plugin which assigns new capabilities in db/install.php or db/upgrade.php currently cannot be upgraded, and/or breaks the phpunit init script. Plugins known to be affected:    [https://moodle.org/plugins/block_demostudent]  [https://moodle.org/plugins/mod_adobeconnect]    STEPS TO REPRODUCE:  - Install vanilla Moodle 3.6.4  - Install the block_demostudent plugin [https://moodle.org/plugins/block_demostudent]  - Run the phpunit init script, admin/tool/phpunit/cli/init.php    EXPECTED (and working in Moodle 3.6.2 and 3.5.4):  ++ Sucess ++    ACTUAL (as of Moodle 3.6.4 and 3.5.5):  Default exception handler: Coding error detected, it must be fixed by a programmer: Capability 'block/demostudent:seedemostudentblock' was not found! This has to be fixed in code. Debug:   Error code: codingerror  * line 1351 of /lib/accesslib.php: coding_exception thrown  * line 45 of /blocks/demostudent/db/install.php: call to assign_capability()  * line 979 of /lib/upgradelib.php: call to xmldb_block_demostudent_install()  * line 520 of /lib/upgradelib.php: call to upgrade_plugins_blocks()  * line 1852 of /lib/upgradelib.php: call to upgrade_plugins()  * line 491 of /lib/installlib.php: call to upgrade_noncore()  * line 461 of /lib/phpunit/classes/util.php: call to install_cli_database()  * line 150 of /admin/tool/phpunit/cli/util.php: call to phpunit_util::install_site()    POSSIBLE SOLUTIONS    In lib/upgradelib.php, update_capabilities() is typically called immediately after a component's xmldb_$component_install() function. We could create the capabilities before calling the install function. If this would not have any negative consequences, it seems like the cleanest solution.    If there is a way to resolve this within the plugins, then let's update the plugin documentation to specify where in the code newly created capabilities should be assigned.    Related:  [https://moodle.org/mod/forum/discuss.php?d=384596]  [https://github.com/iomad/iomad/issues/1116]  [https://docs.moodle.org/dev/Upgrade_API#install.php]  [https://docs.moodle.org/dev/NEWMODULE_Adding_capabilities]     """
"MDL-65724","Bug","Backup",3,"Import: Disabled general restore default values override import settings","""Hi there,    due to a support issue from one of our clients, we've encountered this issue.     *Problem*  Within the import dialogue you can decide for some aspects like activities, groups or blocks etc. to be included in the import or not. Unfortunately, even if a user enables, for example, the group and groupings option, the groups and groupings will not be included in the restore controller if the default restore setting _restore | restore\_general\_groups_ is disabled.    *Steps to reproduce*  We use the option for groups and groupings exemplarily. The behavior is identical for all import options.  # Login as admin  # Set the value *restore | restore_general_groups* to *No*  # Create three Courses: """"Course 1"""", """"Course 2"""" and """"Course 3"""" and enrol a teacher to those courses  # Login as this teacher  # Go to """"Course 1""""  # Autocreate groups """"Group 1"""" - """"Group 5"""" and don't allocate any students to these groups  # Make sure you have those Groups in your Course  # Go to """"Course 2""""  # Select the import from """"Course 1""""  # Verify that the option _Include groups and groupings_ is checked  # Perform the import and press _Continue_  # Go to your group page and verify that there are no Groups in """"Course 2"""" and so no import of the groups was performed  # To counter check, login as admin again and set the value *restore | restore_general_groups* to *Yes*  # Login as the teacher and go to """"Course 3""""  # Repeat the steps 9 - 11  #  Go to your group page and verify that the 5 groups from """"Course 1"""" are imported    *Possible cause*  The import function doesn't has any interactive UI to control the options for the restore process. In fact, they are not needed as the user declared his wish within the import UI. So Moodle should only use the created backup file and restore this independent from any default values. However, within the restore_controller.class the defaults will be applied: https://github.com/moodle/moodle/blob/master/backup/controller/restore_controller.class.php#L146    We think this is the same problem as it was reported and fixed with the recycle bin (MDL-63263, MDL-65218) and it's a regression from introducing the general restore default values (MDL-34859).    *Intended behavior*  First of all, Moodle should present all the settings that are selectable on the general restore default value page. Currently only a small subset is presented on the UI for the import. Then a backup should be created and without any changes due to default settings this backup file should be restored to the new course.    Best, Kathrin"""
"MDL-65772","Task","Libraries",1,"Upgrade MongoDB PHP Library to 1.4.2","""MongoDB PHP Library /cache/stores/mongodb/MongoDB/ 1.4 1.4.2 Yes https://github.com/mongodb/mongo-php-library/releases    https://github.com/mongodb/mongo-php-library/compare/1.4.0...1.4.2"""
"MDL-65741","Task","Libraries",3,"Replace PHPExcel with PHPSpreadsheet","""https://github.com/PHPOffice/PhpSpreadsheet"""
"MDL-65835","Task","Plagiarism",5,"deprecate plagiarism_get_form_elements()","""we should deprecate plagiarism_get_form_elements() and recommend the use of the coursemodule callbacks (added in 3.1)    The """"replacement"""" function would be to use plagiarism_get_form_elements - but by using callbacks plugin devs can also hook into the validation/edit_post_actions functions as well which wasn't possible using plagiarism_get_form_elements"""
"MDL-65869","Bug","Automated functional tests (behat)",1,"Remove the @app tests from core","""In order to add more @app tests for the core feature in a consistent way, it has been decided to have all them placed in a local plugin for app tests which just has app tests: [https://github.com/moodlehq/moodle-local_moodlemobileapp/]    Although a few core feature behat @app tests were included in MDL-63977 (i.e. forum) to check the framework works, there was never any intent to provide behat tests for app functionality for core.    The reason behind that decision is that the core functionality provided in the app (activities, course, navigation) is all native to the app; the 3rd party plugins are all written within the Moodle plugin and are just presented in the app. The forum one is a case in point. That test was written when the app was at 3.6.0 and it worked. It continued to work at 3.6.1 of the app and was also working last week after the release of Moodle 3.7.0. Since then the app has had a forum update which causes all existing forum behat to fail. That is not due to a failure in Forum, or the core Web Services, or the core Behat. It's due to a change in the App itself and the interactions that it presents. A contrib plugin has its own mobile code bundled with its own behat tests. Aside from major refactors of the mobile app, both the UI presentation, and the tests are fully under control of the developer. For core functionality, including core plugins like forum, the functionality in the app is provided natively by the app and not Moodle but we are adding tests for this functionality to Moodle. Whilst we can use the @app_upto3.6.1 it's still not going to help us in the long term because we have no way of identifying which tests are going to fail, up until they do fail, by which point we've already released.         So instead of fixing the issues raised with app-3.7 in MDL-65832, we are going to close it and remove completely the @app tests from core."""
"MDL-65896","Improvement","Messages",3,"Add emojis to messaging","""Add emoji support to messaging as is common in most standard messaging services."""
"MDL-65918","Bug","Authentication",1,"Error during first OAuth2 login for existing account (Call to undefined function auth_oauth2\profile_save_data())","""When I set up an account with the """"oauth2"""" auth type (using a custom OAuth2 issuer, in this case), the first time the user logs in with OAuth2 she will receive the following error:    Exception - Call to undefined function auth_oauth2\profile_save_data()    Stack trace:   * line 354 of /auth/oauth2/classes/auth.php: Error thrown   * line 536 of /auth/oauth2/classes/auth.php: call to auth_oauth2\auth->update_user()   * line 49 of /auth/oauth2/login.php: call to auth_oauth2\auth->complete_login()         The problem seems to have been introduced in this commit from December 2018, when the call to `profile_save_data()` was added without also requiring `user/profile/lib.php`:  [https://github.com/moodle/moodle/commit/e2b812fc4028ebf40c4fbb1cdad293a825d84079#diff-53adc3a153341eaa9eb2d5e086e88519R354]         A fix that worked for me was to simply add         under the other require_once() statements at the top of *auth/oauth2/classes/auth.php*.          Unfortunately I don't anticipate having the time to go through the process of becoming a new contributor and submitting code for peer review anytime soon. I hope this is a good enough start to get this fixed in a future release."""
"MDL-65928","Improvement","Choice|HTML and CSS|JavaScript|Usability",2,"Create a toggle-all checkbox output component","""h5. Who is this project for?  * For Moodle devs!; and   * Ultimately for Moodle users!    h5. What is the problem that you're trying to solve?  * [~dobedobedoh] created the awesome core/checkbox-toggleall AMD module. However, to be able to use it, you will have to do various stuff first (e.g. import the AMD module, manually edit the HTML/attributes of the elements to add the required data attributes, etc).  * It currently doesn't have support for toggling the state of action elements (e.g. buttons that perform actions on the selected items.   * It currently doesn't support toggling of nested checkbox elements (e.g. master checkbox toggles all checkboxes, while another master checkbox that toggles a subset of those checkboxes)    h5. Why does it need solving?  * It would help developers to easily use the checkbox_toggleall element!  * We'll be able to provide a more consistent method of selecting/deselecting items on a list.    h5. How does your project tackle the problem?  * The patch for this issue provides an easier way for developers to output a toggle-all checkbox that can control a group of checkboxes on a list. Developers will simply have to implement the following:  *# Define master checkbox(es) - responsible for toggling the checkboxes in the list.  *# Define slave checkboxes  *# (Optional) Assign appropriate data attributes to action elements. Action elements are those who perform actions on the selected items.  * The improvements on the core/checkbox-toggleall will also  ** enable support for toggling the state (enabled/disabled) of  action elements. This will help us clean up the custom JS code for enabling/disabling the action elements scattered all throughout moodle.  ** allow master checkboxes to belong to multiple toggle groups. In other words, this means that master checkboxes can control one or more groups of checkboxes. This is particularly helpful for selecting multiple items belonging to different groups. """
"MDL-65938","Improvement","Quiz|Usability",1,"Use the checkbox-toggleall component for the quiz activity","""h5. Who is this for?  * Moodle users who can manage quiz activities (e.g. teachers, course managers, etc)    h5. What is the problem that you're trying to solve?  * The inconsistent way of checking items on a list throughout Moodle    h5. Why does it need solving?  * A consistent way of checking items on a list would provide a better user experience    h5. How does this issue tackle the problem?  * The patch for this issue will implement the usage of the checkbox-toggleall output component which aims to improve the UI and UX by:  ** having a master checkbox for toggling the checked states of the checkbox elements in the quiz items list when editing a quiz.  ** making the action button """"{{Delete selected}}"""" button enabled only when there's at least one item selected.  ** having a master checkbox for toggling the checked states of the checkbox elements for the quiz attempts table.  ** making the action buttons """"{{Regrade selected attempts}}"""" and """"{{Delete selected attempts}}"""" enabled only when there's at least one item selected.  """
"MDL-65937","Improvement","Lesson",1,"Use the checkbox-toggleall component for the lesson activity","""h5. Who is this for?  * Moodle users who can manage lesson activities (e.g. teachers, course managers, etc)    h5. What is the problem that you're trying to solve?  * The inconsistent way of checking items on a list throughout Moodle    h5. Why does it need solving?  * A consistent way of checking items on a list would provide a better user experience    h5. How does this issue tackle the problem?  * The patch for this issue will implement the usage of the checkbox-toggleall output component which aims to improve the UI and UX by:  **  having a master checkbox for toggling the checked states of the checkbox elements in the items list.  ** making the """"{{With selected}}"""" select box enabled only when there's at least one item selected."""
"MDL-65935","Improvement","Feedback|Usability",1,"Use the checkbox-toggleall component for the feedback activity","""h5. Who is this for?  * Moodle users who can manage a feedback activity (e.g. teachers, course managers, etc)    h5. What is the problem that you're trying to solve?  * The inconsistent way of checking items on a list throughout Moodle    h5. Why does it need solving?  * A consistent way of checking items on a list would provide a better user experience    h5. How does this issue tackle the problem?  * The patch for this issue will implement the usage of the checkbox-toggleall output component which aims to improve the UI and UX by having a master checkbox in the Select column that controls the checkboxes in the list of non-respondents instead of having two separate """"{{Select all}}"""" and """"{{Deselect all}}"""" buttons"""
"MDL-65933","Improvement","Database activity module|Usability",1,"Use the checkbox-toggleall component for the database activity","""h5. Who is this for?  * Moodle users who can edit items in a database activity (e.g. teachers, course managers, etc)    h5. What is the problem that you're trying to solve?  * The inconsistent way of checking items on a list throughout Moodle    h5. Why does it need solving?  * A consistent way of checking items on a list would provide a better user experience    h5. How does this issue tackle the problem?  * The patch for this issue will implement the usage of the checkbox-toggleall output component which aims to improve the UI and UX by:  **  having a single button for toggling the checked states of the checkbox elements in the items list.  ** making the """"{{Delete}}"""" selected button enabled only when there's at least one item selected."""
"MDL-65950","Improvement","Enrolments|Usability|User management",1,"Use the checkbox-toggleall component for the course participants page","""h5. Who is this for?  * Moodle users who can a manage course participants (e.g. teachers, course managers, etc)    h5. What is the problem that you're trying to solve?  * The inconsistent way of checking items on a list throughout Moodle    h5. Why does it need solving?  * A consistent way of checking items on a list would provide a better user experience    h5. How does this issue tackle the problem?  * The patch for this issue will implement the usage of the checkbox-toggleall output component in the course participants. This aims to improve the UI and UX by replacing the """"\{{Select all}}"""" and """"\{{Deselect all}}"""" buttons in the course participants page with a master toggle-all checkbox for toggling the checked states of checkboxes of the users in the course participation report table."""
"MDL-65949","Improvement","Reports|Usability",1,"Use the checkbox-toggleall component for the course participation report","""h5. Who is this for?   * Moodle users who can manage a course (e.g. teachers, course managers, etc)    h5. What is the problem that you're trying to solve?   * The inconsistent way of checking items on a list throughout Moodle    h5. Why does it need solving?   * A consistent way of checking items on a list would provide a better user experience    h5. How does this issue tackle the problem?   * The patch for this issue will implement the usage of the checkbox-toggleall output component in the course participation report page. This aims to improve the UI and UX by replacing the """"{{Select all}}"""" and """"{{Deselect all}}"""" buttons in the grade categories with a master checkbox-toggleall checkbox for toggling the checked states of entries in the course participation report table."""
"MDL-65948","Improvement","Gradebook|Usability",1,"Use the checkbox-toggleall component for the gradebook setup page","""h5. Who is this for?  * Moodle users who can manage the grade book (e.g. teachers, course managers, etc)    h5. What is the problem that you're trying to solve?  * The inconsistent way of checking items on a list throughout Moodle    h5. Why does it need solving?  * A consistent way of checking items on a list would provide a better user experience    h5. How does this issue tackle the problem?  * The patch for this issue will implement the usage of the checkbox-toggleall output component in the """"Gradebook setup"""" page. This aims to improve the UI and UX by replacing the """"{{All / None}}"""" links in the grade categories with master checkboxes for toggling the checked states of the grade items under the corresponding grade category.  """
"MDL-65946","Improvement","SCORM|Usability",1,"Use the checkbox-toggleall component for the SCORM package activity","""h5. Who is this for?  * Moodle users who can manage SCORM package activities (e.g. teachers, course managers, etc)    h5. What is the problem that you're trying to solve?  * The inconsistent way of checking items on a list throughout Moodle    h5. Why does it need solving?  * A consistent way of checking items on a list would provide a better user experience    h5. How does this issue tackle the problem?  * The patch for this issue will implement the usage of the checkbox-toggleall output component in the """"{{Reports}}"""" page of the SCORM package activity. This aims to improve the UI and UX by:  ** having a master checkbox for toggling the checked states of the checkbox elements in the attempts table of the """"{{Reports}}"""" page.  ** making the action button """"{{Delete selected attempts}}"""" button enabled only when there's at least one item selected.  """
"MDL-65994","Improvement","Questions",1,"Use the checkbox-toggleall component for the question bank","""As of Moodle 3.7, the question bank has started using the core/checkbox-toggleall AMD module.     Though this is already great, using the checkbox-toggleall output component that's being developed in MDL-65928 would also be cool and hopefully, help tidy things up."""
"MDL-66034","Bug","Logging|Privacy|Roles / Access",1,"Log role changes in more detail ","""The Danish Data Privacy Agency has due a privacy incident where a role misconfigured (which gave students access to too much data) expressed their criticism on Moodle.     Currently Moodle only logs the following on a role change:    !https://i.imgur.com/htRETGn.png!    The Privacy Agency har criticized that it is not logged what the actual change in the role was, hence making it impossible to detect when the misconfiguration occurred.     Furthermore this is logged in the normal moodle-log which automatically rolls over  - I think standard is 90 days or so.    We propose that role changes on system level are logged in the config-log and that the normal role-change is expanded.    Furthermore role-overrides needs to be logged in more detail as well.  """
"MDL-66048","Task","Calendar",3,"Investigate: how assign relative due date change can be implemented in calendar","""Look into what changes will be required in the calendar API to allow per user events so that they can work with the per user course start dates    Acceptance criteria:  * Rough proof of concept changes to work with relative date for assignment due date  * Look into how that will work with calendar drag/drop of events (can it be disabled?)  * Identify any areas that need UX input"""
"MDL-66047","Task","Assignment",3,"Investigate: Proof of concept change assignment due date to relative date","""Change the assignment due date to store a relative date and identify the areas that will be affected by that change.    Acceptance criteria:  * Identify UI areas affected  * Identify automated tests affected (unit + behat)  * Have a rough proof of concept code change to demonstrate it working  * Look into how it works with overrides"""
"MDL-66046","Task","Course",3,"Investigate: identify places in Moodle that reference the course start date directly","""We need to find all of the places in Moodle that are looking directly at the course start date and have a think about how we can update them to use the new function which calculates the start date for the user.    Acceptance criteria  * We have a list of all areas in Moodle that reference the course start date directly  * Have a plan of how to modify them to use the new function (or what else we might need to implement)  * Identify any areas that need UX input"""
"MDL-66045","Task","Course",1,"Investigate: adding new course functions to calculate start date","""Look into adding a function in course lib to calculate the course start date per user so that the activities can use it for their relative date calculations.    Acceptance criteria  * Returns the student's course start date calculated as follows  ** If the student is enrolled before the course start then return the course start date  ** otherwise return the students enrollment start date  * Proof of concept function  * Used by an activity  * Identify any areas that need UX input"""
"MDL-66080","Bug","Forum",0,"Paginate between users forum posts","""When I have the unified grader interface open  Then I should be able to select a user to grade"""
"MDL-66079","New Feature","Forum",2,"Add configuration to show grading options in the Forum settings","""Given I add a new forum  And I press """"Edit settings""""  Then I should be able to apply a rubric    I believe we need to:  # define the FEATURE  # define a grading function """"{{forum_grading_areas_list}}""""    There may be other things to do also.    I think that we may want to consider having _multiple_ grading items.  The gradebook supports having multiple grades for a single activity. We may want to consider having items for:  * forum (grade for all posts in a forum)  * discussion (aggregate of all graded discussions)  * post (aggregate of all graded posts)  * ratings    I suspect we'll need to look at forum, and ratings initially and we may no need to do anything initially, but have to consider it now for a later point."""
"MDL-66078","Bug","Forum",2,"Add WS and display to show all content for a user","""Will be called by the user selector and paginator.    Will take:  # cmid  # userid  # groupid (optional)  # page (optional)    Possibly other options in the future."""
"MDL-66077","Bug","Forum|Gradebook|Grading methods",0,"Create basic template structure and JS wrapper","""Create the basic template showing:  * user pane  * content pane  * grading pane    These should be in a location central to the Grading component, i.e. grade/templates  Each pane should be rendered from its own template.    Create JS to display the interface.  The JS shoudl be in a location such as """"{{core_grade/unified_grader}}"""" or similar and should have an instantiable object for the UI with functions to show, hide, etc.    Configuration will probably need to include:  * cmid    Other configuration will be required in the future"""
"MDL-66110","Bug","Database SQL/XMLDB|Messages",2,"Error reading from database after upgrade to 3.7.1 (MySQL 8.0.2)","""When trying to upgrade from version 3.3 to 3.7.1, we get an error:    Default exception handler: Error reading from database Debug: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'groups g   ON mc.itemid = g.id   WHERE mc.compo' at line 3  SELECT mc.id   FROM message_conversations mc   LEFT JOIN groups g   ON mc.itemid = g.id   WHERE mc.component = ?   AND mc.itemtype = ?   AND g.id is NULL  [array (   0 => 'core_group',   1 => 'groups',  )]  Error code: dmlreadexception  * line 486 of \lib\dml\moodle_database.php: dml_read_exception thrown  * line 1245 of \lib\dml\mysqli_native_moodle_database.php: call to moodle_database->query_end()  * line 2743 of \lib\db\upgrade.php: call to mysqli_native_moodle_database->get_records_sql()  * line 1809 of \lib\upgradelib.php: call to xmldb_main_upgrade()  * line 518 of \admin\index.php: call to upgrade_core()         Probable reason in the keyword """"GROUPS"""" - from version MySQL 8.0.2 this word is reserved and forbidden by standard SQL as column or table names  ([https://dev.mysql.com/doc/refman/8.0/en/keywords.html])"""
"MDL-66153","New Feature","Forum",1,"Forum report: Basic skeleton","""Create a basic skeleton for the Forum report.   # Create new forum subplugin for forumreport   # Summary for single forum   # No Download required initially   # No filtering required initially   # Basic fields: Names, Reply counts, Created discussion count"""
"MDL-66150","Bug","Forum",3,"Forum report: Discovery","""Discovery and [specification document|https://docs.google.com/document/d/1JD2G3ZBewj4QkfhB70A7hOdHLgWca5TVNbNHaDtXktw/edit?usp=sharing] write-up for the forum summary reporting project.     """
"MDL-66148","New Feature","Assignment",1,"As a teacher, I want to be able to override the assignment due date for a student, so that I can adjust for their circumstances","""A teacher should be able to override the assignment due date in a relative dates course for a student.    Acceptance criteria:  * The override should not affect any other students  * The override date should appear on all grading/submission views for the teacher  * The override table and form should show the relative date for that user  * The 'reset to assignment defaults' button should reset due date to the current student's relative date."""
"MDL-66147","New Feature","Assignment",1,"As a teacher, I want to be able to create an assignment activity with a 'due date' relative to the student course start date, so that the student can complete the full course","""A teacher should be able to create an assignment activity with a relative due date. The due date should be relative to when the student begins the course.    Acceptance criteria:   * Due date is only relative when the activity is in a course set to relative dates   * Student sees a relative date on submission page   * Teacher sees the student's relative due date when grading   * Teacher sees the student's relative due date when viewing submissions   * Does not include handling overrides in this issue   * Does not include handling extensions in this issue   * Does not include showing calendar events for the student int his issue   * Does not include access restrictions based on date.   * Sort by due date/status in view all submissions table should be disabled   * Web services should be updated"""
"MDL-66144","New Feature","Course",3,"As a student in a weeks-format course, I want to be able to see the weekly dates displayed relative to my start date, so that I can plan my coursework","""When a relative dates course is set to the """"weekly"""" course format the dates for each section should be relative dates for the user.    Acceptance criteria:  * Dates should only be relative when the course is set to """"relative dates"""""""
"MDL-66143","New Feature","Course",5,"As a teacher, I want to be able to create a course in relative dates mode, so that students can take the course any time","""Add a new setting to the course to allow the teacher to choose between fixed dates or relative dates.    Acceptance criteria:  * An admin setting should be added to enable """"relative dates"""" as an experimental feature  * Relative date courses can not be created unless the experimental feature is enabled  * A course can not be changed between relative or fixed dates once it has been created  * A warning is visible when using the feature, telling them that they cant change the value once set (in the course edit form)    Edit: Decision was made such that the experimental feature toggle will only affect new courses. Existing courses remain in their respective mode.    This does not include backup and restore."""
"MDL-66184","Bug","Automated functional tests (behat)",0,"Bump moodle-behat-extension php requirements to 7.x","""In MDL-50733 we updated moodle-behat-extension to newer behat version (3.5) and updated other requirements.    This is a followup about to, also, raise the php required version to 7.0 (35_STABLE and 36_STABLE) and 7.1 (37_STABLE and master).    Steps should be:    1) Create the PRs @ github.  2) Run tests @ CI agains them.  3) Merge the PRs and release the new versions.  4) Bump composer here to point to the new releases.    Doc: https://docs.moodle.org/dev/Composer#How_to_prepare_and_submit_composer_changes"""
"MDL-66226","Improvement","Messages",1,"Show plain text in Messages summary pane","""From discussion with [~michaelh]:  {quote}I think the reason is that you wouldn't want things like <h1> showing massive text within the summary pane, though maybe it needs to just strip any HTML and show plaintext (maybe with the exception of an emote showing the actual icon)  {quote}  See following example:    !HTML entities.png|thumbnail!       Should be able to do this here:  https://github.com/moodle/moodle/blob/master/message/amd/src/message_drawer_view_overview_section.js#L601    Acceptance Criteria:  *  Display either the text value, alt tag, title, element type (in that order of priority), falling back to a generic message (""""Media content"""") if we can't match the above."""
"MDL-66245","Bug","Privacy",0,"GDPR data request export not usable when using special characters (invalid file paths)","""This is a follow-up issue arising from the code change in the context of issue https://tracker.moodle.org/browse/MDL-64511. I confirmed the problem for current versions of Chrome, Firefox and Edge Dev Build on Windows 10.    If you try to access the data.json files by clicking in the navigation bar of the index.html file, which has been exported by a data request, the corresponding data is not loaded. For example, the error message in Chrome is _""""GET file:///[...]/export/Kernsystem%20_.1*%2F*data.js net::ERR_INVALID_URL""""_.    The problem is that the 'slash' in the data path is encoded as '*_%2F_'*. Obviously, for some combinations of browser and operating system, slashes must not be encoded. In Windows the error message also remains when you use XAMPP as local web server to serve the data export and try to access it via http.    The usage of *encodeURIComponent* in *line 65* of the _js/general.js_ seems to be problematic. I have experimented with a possibility to restore slashes after the encoding with the replace function:    {{E.g. newscript.src = encodeURIComponent(data).replace(/%2F/g, """"\/"""");}}    However, the only reasonable solution in my view is to avoid all special html symbols in the file names of the export and to use *encodeURI* instead of *encodeURIComponent* afterwards.    As most users probably use Windows with Chrome or Firefox in my opinion this is an urgent problem."""
"MDL-66268","New Feature","Forum",2,"Groups filter in forum summary report","""Set up the filter area in the report interface, and add ability within that filter area to choose which group(s) within that forum are shown."""
"MDL-66264","Task","Messages",1,"Investigate integration with rocket chat","""[Rocket chat|https://rocket.chat/] is an open source clone of Slack which offers a more fully featured chat experience than in-built Moodle messaging.    While it's important to keep a messaging solution that ships with Moodle it might also be worth looking at the possibility of an integration with Rocket.chat for institutions that require a more feature full messaging experience (i.e. Workplaces)."""
"MDL-66293","Bug","Quiz",0,"Pagination overflows modal window on add random question  ","""`Steps to recreate:    # Make sure that you have a question bank where one of the categories has more than 100 questions.    # Add a new quiz to the course    # Add a random question to the quiz      Result: The pagination expands beyond the popup . The GUI is even worse on mobile .     Expected result: The gui looks nice .     See screenshots below:     !https://i.imgur.com/fhyGoC3.png!    !image-2019-07-31-15-54-30-625.png!"""
"MDL-66292","Bug","Forum",1,"Exporter class is missing required related data error in forum discussions","""As reported in [https://moodle.org/mod/forum/discuss.php?d=389064,|https://moodle.org/mod/forum/discuss.php?d=389064] after upgrading to Moodle 3.7, some forum discussion threads (or a forum activity of type single simple discussion) display an error message:  {quote}Coding error detected, it must be fixed by a programmer: Exporter class is missing required related data: (mod_forum\local\exporters\post) author => mod_forum\local\entities\author  {quote}  Several forum discussion threads on moodle.org display the same error e.g. [https://moodle.org/mod/forum/discuss.php?d=65811] If you [search for the discussion subject|https://moodle.org/mod/forum/search.php?id=5&words=&phrase=Windows+server%3A+IIS6+and+PHP%2C+prompts+for+username+and+password], the forum post is listed in the search results with the content displayed correctly."""
"MDL-66301","New Feature","Forum",1,"Add ability to summarise all forums in a specific course","""The forum summary report only shows the current forum. We should extend this so it is able to provide a summary report of all forums in a specific course.    The scope of this issue is that (by default) teachers will be able to view the summary report for exactly one forum in a course (current functionality), or all forums in a course (that they have access to)."""
"MDL-66299","Bug","Forum",1,"Add column to show the number of attachments that a user has added to the forum","""Attachments column  Showing the count of attachments in the posts which match the filter"""
"MDL-66297","New Feature","Forum",2,"Link forum summary report to export of each user's post content","""Link the current row to the export of the content which generated that row"""
"MDL-66322","Bug","Unit tests",2,"Use exttests repo in travis","""Travis supports docker.  We have an exttests Docker repo for our external HTTP tests  We should combine the two! Start the exttests docker image when we run tests to reduce the random phpunit fails due to connectivity failures."""
"MDL-66366","New Feature","Forum",1,"Create a prototype site","""Create a prototype site for this feature"""
"MDL-66365","New Feature","Forum",3,"Add a button to display the entire discussion for a post being graded","""Contextual information is important. We should provide a mechanism to view the entire discussion for the content being graded."""
"MDL-66364","New Feature","Forum",3,"Add parent post snippet","""When grading a post which is a reply, show the first [n] characters of the previous post in order to give context to the discussion being graded."""
"MDL-66362","New Feature","Forum",2,"Add ""breadcrumb"" to top corner of grading window","""Add the breadcrumb region to the grading window to help identify which activity is being graded."""
"MDL-66358","New Feature","Forum",5,"Display grading form in the grading panel","""Display the grading form in within the grading panel for the current student/content    h2. How it works in Assignment  Assignment grading currently does:      That comes from {{grade/grading/form/[type]/lib.php::render_grading_element()}}  And that calls a renderer function to do loads of things.    h2.Recommendations  I don't think that we shuld use the fragments API to do this, at least initially. It doesn't fit in well with what we're  doing here more generally.    Therefore I think we need to update the existing grading options to support a new UI.  We _may_ be able to replace the existing rendering with that, but we shouldn't do it in this issue.    # Create new mustache templates in {{grade/grading/form/[type]/templates}}  # Replace the existing JS with a new ES6/AMD module called from the template and using {{uniqid}} (should be trivial)  # Create a new renderable for each of the advanced grading forms in {{/path/classes/output/grading_panel_renderable.php}}  ## Implement an {{export_for_template(renderer_base $output)}} in there  ## Constructor to take finalised values  # Create an instance of the renderable in a new function in {{lib.php}}, or better still in a new class in {{grade/grading/form/[type]/classes/gradingpanel.php}} or similar.  That function should return the instance of the renderable.  # Create a new WS to call the new function/class method. That will then call {{export_for_template}}, then return the result.  # When it comes to saving grades in the grading panel we call the named webservice for each grading form type:  ## {{gradingform_rubric_save_grades_for_user_in_cmid($user, $cmid, $gradeoptions);}} or similar  ### That should return the same values (along with a success/fail)  # Create a generic grade one for simple direct grading  # We also need to either:  ## limit the list of advanced grading types in the modgrade form field where we choose them from; or  ## ???    When setting up the JS we can do it similar to user selector, except that we have curried fns to:  # fetch the name of the template to use during render  # fetch the current data (curried which already provides cmid) and takes just user  # save the data in the form right now (curried which already provides cmid) and takes user and data in form    Theoretically it should be the Forum which provides the curried functions, but they're also kinda the property of the Grading API so we need to work out how best to do that longer term.    h2. Scope  Do not do eveything that the current stuff does. Don't handle all of the modes (especially edit). We should break out  marking an editing anyway.  Keep everything as basic as possible.      h2.  Configuration containing list of grading mechanisms:  * Advanced type:  ** Simple direct (not an advanced)  *** Type (for Simple direct only)  **** Scale  **** Point  ** Marking guide  ** Rubric    The Scale/Point are shown when using the other advanced types, but are not editable."""
"MDL-66372","Bug","Forum",2,"Implement summary report pagination size","""Implement results per page on the forum summary report, to control how many results are returned during pagination.    To start with, we should only accept 50 (default), 100, 200 as options, possibly fall back to the default  if another value is specified, since it is not worth failing the request just for an invalid pagination value.    Be aware that the summary report currently implements the null privacy provider, so unless you wish to set up the provider, in the first instance it is probably better to just keep the 50 default and not store a user preference for it."""
"MDL-66371","New Feature","Forum",1,"Forum: add behat test covering forum export","""Add appropriate behat + unit tests."""
"MDL-66369","Improvement","General|Libraries",1,"Remove all instances of [modname]_scale_used","""This should have been done in MDL-51883 for 3.6 but the deprecation was not fully done.    These functions were only used by the deprecated function which was deprecated in 3.1, and removed in 3.6. They should have been removed at the same time."""
"MDL-66455","Bug","Calendar",1,"Site level calendar subscriptions are not being listed in the Manage subscriptions page","""To reproduce:   # Log in as admin.   # Go to the calendar   # Press """"{{Manage subscriptions}}""""   # Enter a calendar name.   # For the """"{{Calendar URL}}"""" field, enter the following URL of a public test Google calendar: https://calendar.google.com/calendar/ical/moodle.com_gverd91agb5htmi8ervnn6q2j0%40group.calendar.google.com/public/basic.ics  # Under """"{{Type of event}}"""", choose """"{{Site}}""""   # Press """"{{Add}}"""".   # *Expected*   #* The events are successfully imported as site events.   #* The site-level subscription gets listed.   # *Actual*   #* The events are successfully imported as site events.   #* The site-level subscription is not being listed. """
"MDL-66481","New Feature","Forum",1,"Update display of discussion in discussion list table","""Update the display of the discussion list table on the discussion list page (mod/forum/view.php) to match the prototype:  https://projects.invisionapp.com/share/9GQ8R2O3H7J#/screens/350489135    h4. Acceptance criteria  * Table can be sorted by the columns  * Clicking on the unread replies label takes the user to the first unread reply on the discussion  * """"Following"""" in the prototype is actually """"Subscribed""""  * The star toggle should be visible unless the discussion is pinned, in which case the pin will be displayed  * Clicking the star toggle should star or unstar the discussion"""
"MDL-66477","New Feature","Forum",1,"Create settings side drawer for new discussion view","""Create a settings side drawer for the new forum view that contains all of the discussion header settings.    The settings panel can contain a few sections such as:  * General with toggles for  ** subscription  ** star  ** pin  ** locked  * View which shows the view selector  * Move which shows the move selector  * Export to portfolio button (if enabled)    The prototype here shows the side panel without any content:  https://projects.invisionapp.com/d/main/?origin=v7#/console/18367584/381579786/preview  ([old prototype|https://projects.invisionapp.com/share/9GQ8R2O3H7J#/screens/350489133])    See the """"settings"""" part of the messaging drawer for an example of how it might look.    h4. Implementation details  * It would be good to create generic side drawer code/component which can be re-used between this and the messaging drawer    h4. Acceptance criteria  * Discussion heading options are all moved into a settings side drawer"""
"MDL-66489","Bug","Calendar",0,"Negative timestamp number for a Persian calendar in edit enrolment section","""* I install the Persian calendar ([https://moodle.org/plugins/calendartype_jalali]) and change default calendar to (solar date)   * I add a course and enroll a user to it   * In courses > participants go to user """"edit enrolment"""" section   * Active enrolment starts or enrolment ends for the user and save   * After saving data, in next time date show wrong for user enrolment start and end   * In my test client-side js calculate wrong negative timestamp number and send to server-side and saves a negative number for a time in DB so Persian calendar shows the wrong date"""
"MDL-66502","Bug","JavaScript",1,"Moodle 3.8 does not load javascript files from previous moodle versions","""When calling an amd module on moodle 3.8 which was minified using a previous moodle version, the javascript doesn't get loaded and I get the following error in the console:  {quote}Error: No define call for lifecyclestep_adminapprove/link-steps   [http://requirejs.org/docs/errors.html#nodefine]  {quote}  To test it, you can use the 'Test plugin from previous version of Moodle' testing instruction from MDL-62497 .    It seems not to be the fault of the block_counter, since javascript also didn't work in two other plugins when minified using a previous moodle version, but they all work when the javascript is minified using moodle38."""
"MDL-66503","Bug","SCORM",3,"Scorm player is really narrow in new window on classic theme","""With the Classic theme enabled:    # Create a new scorm activity  #* Under """"Appearance"""" set """"Display package"""" to """"New window""""  # Click """"Save and display""""  # Enter the scorm activity    In boost, the player takes up the full width of the window, in classic it takes up less than half of it.    To test, I used the scorm package available [here|http://www.centralquestion.com/Links/Samples.html] """
"MDL-66594","Task","Forum",1,"Add columns to show earliest and most recent post timestamps","""Add two columns to the forum summary report, one for each user's earliest post, and one for their most recent."""
"MDL-66607","Bug","Messages",2,"Random messaging failure","""Copied from MDL-65493.    It looks like the {{getLoadNewMessagesCallback}} function's callback publishes the {{MessageDrawerEvents.CONVERSATION_NEW_LAST_MESSAGE}} along with the conversation Id of the now deleted conversation at around the time that the conversation I also deleted, and I suspect that this causes it to be re-added.    This happens in the {{resetMessagePollTimer}} for the {{backOffTimer}}.    Essentially the timer was running, and a conversation did exist, but it was deleted before the {{PubSub}} completes. The Publish of the new last message event occurs after the conversation has been deleted, and as a result it gets re-created.    I'm not sure how best to fix this one. A few things spring to mind, but they may not be ideal...    # stop timers, and cancel any ongoing requests while dialogues are open or not on the relevant screen  # ??  Not really sure as I don't know enough about the messaging code.    Basically, this is a real race condition. We've not detected it before because of the other issues (which are largely fixed in this MDL).  """
"MDL-66627","Task","Forum",2,"Add behat tests to forum summary report skeleton","""Add behat testing to the forum summary report basic functionality, including:  # Unable to navigate to the report as a student.  # Able to navigate to the report as as a student who has only the view permission, and only able to see own row.  # Able to navigate to the report as a teacher.  # Able to view correct columns and data as a teacher."""
"MDL-66625","Bug","Forum",2,"Private replies should be included in the forum summary report","""We currently blanket ignore private replies. We will need to consider them at some point"""
"MDL-66665","Bug","Assignment",3,"Reopened assignment shown as graded by student themselves","""*Graded by* shows the student who has been graded, when an assignment has been re-opened  To replicate:  # Create an assignment  # Grade a student and *Allow another attempt*  # Login as the student  # Verify that the students name and picture show under Feedback, Graded by"""
"MDL-66707","Bug","Forum",0,"Forum too eager to mark messages as read (threaded view)","""Having set forum view mode to """"Display replies in threaded form"""", forum replies are displayed as nested links that must be followed to view the replies.    In M3.5 (and I guess probably M3.6), the replies would not be marked as read until clicked and viewed.    In M3.7, the replies would are marked as read when the thread is loaded - without having viewed them.    It seems clear that not changing the read status until actually read is the correct behaviour, and this change/regression is a loss of functionality for some of my users."""
"MDL-66695","Task","Forum",3,"Add column to show post view count, if information is available","""Add a column to the forum summary report to show """"Number of views"""", the number of posts each user has viewed.    This will probably require checking log entries to determine a user's read count, which would mean the column should only be shown if the site is using an internal log store. An example of similar log checking and data calculation can be seen in [this report|https://github.com/moodle/moodle/blob/master/report/log/locallib.php#L116-L146]."""
"MDL-66725","Bug","JavaScript|Language",1,"JS loaded strings don't match Moodle language setting","""If an string is loaded using JS it will match the browser lang and not the current Moodle language.    It may be a regression of MDL-62497    *Adding a block steps*   # Setup your browser to use a language different than English. ie Spanish. (May need a browser restart).   # Install this language on you Moodle site. Leave the default language on English.   # Try to add any block.   # Block selector will show the strings in the browser language rather than English.    (((the calendar steps)))    *Enrol user steps*   # Setup your browser to use a language different than English. ie Spanish. (May need a browser restart).   # Install this language on you Moodle site. Leave the default language on English.   # In a course, go to Participants   # Click the """"Enrol users"""" (translated) button   # Some elements of the enrol user overlay show the strings in the browser language rather than English."""
"MDL-66748","New Feature","Grading methods",0,"Create data generator for core grading + rubric","""We need to create marking guides and rubrics for some tests in other issues.  These partially already exist, but can be made more available to other things.    This is a high priority issue for us."""
"MDL-66768","New Feature","Forum",2,"Add the ability to download the forum summary report","""Add the ability to download a copy of the current forum summary report.    The report utilises Table SQL, so most of the functionality needed should already be provided by that."""
"MDL-66810","Bug","External Tool (IMS-LTI)",0,"Allow microphone and camera to be accessed from content iframe ","""Browser restrictions on iframe content prevent the device camera and microphone from being  accessed, unless explicitly allowed via the allow attribute on the iframe.    Moodle's own RecordRTC icons on the Atto and TinyMCE toolbars will currently not work if shared within an external tool iframe. There are also 3rd party apps such as VoiceThread and Poodll recording which will not work if embedded using Moodle's external tool currently.     This is also related to https://tracker.moodle.org/browse/MDL-65613  which requests the addition of  """"autoplay"""" to the allow attributes.    The chrome browser family added these restrictions last year (2018) and his document explains it a little.   https://dev.chromium.org/Home/chromium-security/deprecating-permissions-in-cross-origin-iframes    It might be prudent to also add """"geolocation"""" and possibly """"midi"""" to the allow list since these are likely to also be required at some point.    It should be noted that allowing these items will still not enable them. The user's explicit permission will be requested before access to camera, microphone or geolocation is granted .    Following the item being allowed, a URL can be specified to restrict permission to that origin. If omitted  the allowed origin is that of the URL in the src attribute. In the case of the mod_lti the src attribute contains a local Moodle url. Since we do not know the true origin (easily) typically a wildcard is used. So the resulting attribute looks like this:   allow=""""microphone *; camera *; geolocation *""""     """
"MDL-66808","Improvement","Forum",1,"Forum export options for human-readable dates and removing HTML","""We need options to:  # export raw HTML or pass it through html2text  # have dates as """"Human-readable""""    """
"MDL-67165","Improvement","Forum",5,"Improve the user grade display modal","""Once we get the core functionality of displaying user grades into core we should have UX run through it and provide us with some designs."""
"MDL-67179","Bug","Forum",1,"Add missing svg and png backups for i/grading icon","""I added a new icon for grading in MDL-66893 but forgot to add the SVG and PNG backups (whoops!) so we need to add those."""
"MDL-67233","Bug","Calendar",1,"Choices with only open dates in the future do not appear on timeline","""If you have a choice with only an open date in the future, this does not then appear in the timeline block    The issue is with the event_list.js:270 which filters out the 'Choice open' event being sent down regardless of whether it's in the future or not"""
"MDL-67264","Improvement","Course",3,"Rework/Redesign the activity chooser","""Redesign/restructure the activity chooser to fit the [current design mock-ups|https://projects.invisionapp.com/d/main?origin=v7#/console/17898774/393374947/preview?scrollOffset=0]    User stories  ||Story||Approach||  |As a teacher, when I click on the activity choose link(the link), I then see the activity picker(the modal), I can then see the activities/resources(the elements) in a grid format and I should not see any tabs(the tabs) in the modal.| |  |As a teacher when there are lots of elements in the modal, I can scroll down in the modal to view them.|Allow scrolling|  |As a teacher I can find out more information about the elements in the modal.|Click the 'i' icon and be taken to another page with more information.|  |As a teacher I should be able to add an element once I have read the detailed information.|A button to add the activity should be present on this page.|  |As a teacher I can select and configure an activity.|Click the activity icon and jumps immediately to the activity settings page|  h3. Acceptance criteria   * All visible activities are listed in the modal.   * Activities are to be displayed in a grid as per the prototype.   * Third party activities are listed in the modal when installed (and visible).   * When there are more activities than will fit in the modal, scrolling down will display them.   * Clicking on the 'i' (information) icon shows the information about the module.   ** Clicking the i results in a page sliding in from the right to show the information (The same as the activity chooser in H5P).   ** A button to add the activity should be available from the information page.   * A single click of an activity icon will redirect to the mod_edit page for configuration.   * Activities can show additional items in the activity chooser.   * Adding activities works using Jaws and NVDA.   ** Keyboard navigation is possible.   * Current behat tests should still work.   * Behat tests are created to cover new functionality (showing information, adding activities from the information page)   * If new methods / functions are added they are covered by unit tests.     """
"MDL-67263","Improvement","Course",3,"Ability to search in the activity chooser","""||User Stories||Approach||  |As a teacher I should be able to search for elements in the modal based on title and information| |  |As a teacher, i should be to see searched elements grouped by tabs| |  |As a teacher I should be able to go back to the default view of the modal once I finish searching|Either by removing search or pressing back button|  |As a teacher when I perform a search I should be able to see what triggered the result|Have this behave like the H5P search. Results are shown, but no context (if the search result is in the more info section).|  |As a teacher, after i perform a search, I should be able to navigate between the information and search results seamlessly|When viewing details of an activity, after clicking back, the search should still be active.|    h3.Acceptance criteria    * A search bar should be located at the top of the activity chooser when it is opened.  * Typing anything into the search bar should immediately start showing results (no need to click a search button).  * The search should search both the name, and the information to show a result.  * Search results should remove the tabs previously shown and show the results on the one page. Results should be categorised i.e. Starred, Recommended, Activities, H5P.  * There must be a way to quickly get back to the default state. Clearing the search box being one way. A back button being another. Please implement both.  * If there are no search results then a message should be displayed saying as much.  * The search results should remain intact while viewing information on an activity, or starring an activity.  * Behat tests must cover the above features."""
"MDL-67262","Improvement","Administration|Course",3,"Add admin page for recommending activities","""Related user stories:  ||User stories||Approaches||  |As an admin, I can set recommended elements to users(teachers/managers)|Site Admin setting page with the list of all activities. Any activity that is present on the page should have the ability to be recommended.|    h3.Acceptance criteria    * A settings page in Site administration menu should be available which allows the administrator to select any activity as recommended. Barbara to confirm where to place this in the admin tree.  * The administrator can also remove the recommendation for activities from the activity chooser from the settings page.  * H5P installation of activities to be dealt with in a different issue.   * behat tests for recommending activities on the admin page.  * Unit tests for any functions methods created through this issue.  * Use the favourites API to store this information."""
"MDL-67291","Task","Other",3,"Create backend code to retrieve activities - Sub task of MDL-67264","""Create backend code to query all installed activities, checking for visibility, and returning a list / object / whatever of activities to display in the activity chooser.    *Note* There should already be code existing for the current activity picker. Investigate that code. It's likely that we won't need to initially touch it and just update the frontend. Current code for retrieving activities is in course/renderer.php - course_section_add_cm_control()    *Note 2* course/lib.php get_module_metadata() does a component callback for 'get_shortcuts' which is what adds more activities to the activity chooser.    *24/11/19* It has been decided today to retool this MDL to test out the performance of webservice call to fetch the course modules and move away using the json_encode method."""
"MDL-67290","New Feature","Other",0,"Define the API allowing course mod plugins to add multiple activities to the activity chooser","""It is currently possible to add additional / pre-configured activities to the activity chooser such as external services. We need to retain this ability.   * We need to finalise our implementation details   * Ensure backwards compatibility   * Unit tests must be included    User story  ||Story||Approach||  |As an admin, I can configure my LTI/H5P tools to be available on the modal| |  h3. Acceptance criteria   * Mod activities can add one or more items to the activity chooser by implementing the new API   * Backward compatibility must be maintained.   ** If we create a new way of adding new items to the activity chooser then we must deprecate the old method.   *** Unit tests must be included with any new functions / methods."""
"MDL-67288","Task","Other",5,"Accessibility implementation & audit of activity chooser - Sub task of MDL-67264","""Review the new Activity picker and make sure that it works with:   * JAWS   * NVDA    Acceptance criteria:  * Focus lock  * Tabbing from inside a grid item goes to exit once done rather than the next or previous   """
"MDL-67287","Task","Other",5,"Create behat tests for the base activity chooser - Sub task of MDL-67264","""Create behat tests to cover all features of the activity chooser.  Acceptance criteria:  * Existing tests passing  * New sliding functionality covered (to description, back from it, adding a new mod from description)"""
"MDL-67286","Task","Other",1,"Create unit tests for the base activity chooser - Sub task of MDL-67264","""Create unit tests to cover the functionality of the new code for the base level activity chooser."""
"MDL-67321","New Feature","Other",3,"Support categories/tabs in the activity chooser","""This issue relies on the list of activities (and their associated metadata) provided by changes in MDL-67290.    This issue is scoped with:   # Translating the list of activities, via display logic, into a template context for the activity chooser template   -- Context should provide tabs/categories each of which contain activities. For now, hard limited to just 'Activities'   -- Context should indicate which cat/tab is the focus (initially, just the 'activities' tab but this will change once favourites and recommendations tabs are added in the respective issues)   # Updating the template code to render the tabs provided by the context, including selection of the in focus tab."""
"MDL-67388","Task","Libraries",2,"Upgrade babel-polyfill to latest version","""babel-polyfill (/lib/babel-polyfill) 6.26.0 --> 7.7.0: [https://babeljs.io/docs/en/babel-polyfill.html] """
"MDL-67385","Task","Libraries",1,"Upgrade MongoDB PHP Library to latest version","""MongoDB PHP Library (/cache/stores/mongodb/MongoDB/) 1.4.2 --> 1.5.1: [https://github.com/mongodb/mongo-php-library/releases]     *Note: This upgrade, upgrades the mongodb extension requirement to 1.6.0*"""
"MDL-67384","Task","Libraries",1,"Upgrade jQuery EU Cookie Law popups to latest version","""jQuery EU Cookie Law popups (/admin/tool/policy/amd/src/jquery-eu-cookie-law-popup.js) 1.1.2 --> 1.1.3: [https://github.com/wimagguc/jquery-eu-cookie-law-popup/releases]    """
"MDL-67383","Task","Libraries",1,"Upgrade VideoJS to latest version","""* VideoJS (/media/player/videojs/amd/src/video-lazy.js) 7.6.5 --> 7.7.6: [https://github.com/videojs/video.js/releases]   * VideoJS  (/media/player/videojs/amd/src/video-lazy.js) 7.6.5 --> 7.7.6: [https://github.com/videojs/video.js/releases]   * VideoJS support files (/media/player/videojs/videojs/) 7.6.5 --> 7.7.6: [https://github.com/videojs/video.js/releases]   * The Flash tech for video.js (/media/player/videojs/amd/src/videojs-flash-lazy.js) 2.2.0 --> 2.2.1: [https://github.com/videojs/videojs-flash]   * Custom Flash Player for VideoJS (/media/player/videojs/video-js.swf) 5.4.1 --> 5.4.2: [https://github.com/videojs/video-js-swf/releases] """
"MDL-67379","Task","Libraries",1,"Upgrade SCSSPHP to latest version","""scssphp (/lib/scssphp) 1.0.2 --> 1.0.6: [https://github.com/scssphp/scssphp]    """
"MDL-67378","Task","Libraries",1,"Upgrade mustache.js to latest version","""Mustache.js (/lib/amd/src/mustache.js) 3.0.1 --> 3.1.0: [https://github.com/janl/mustache.js/releases]    """
"MDL-67376","Task","Libraries",1,"Upgrade loglevel.js to latest version","""loglevel.js (/lib/amd/src/loglevel.js) 1.6.2 --> 1.6.6: [https://github.com/pimterry/loglevel]    """
"MDL-67374","Task","Libraries",1,"Upgrade SimplePie to latest version","""SimplePie (/lib/simplepie/) 1.5.2 --> 1.5.3: [https://github.com/simplepie/simplepie/releases]    """
"MDL-67373","Task","Libraries",1,"Upgrade PHPMailer to latest version","""PHPMailer (/lib/phpmailer/) 6.0.7 --> 6.1.3: [https://github.com/PHPMailer/PHPMailer/releases]    """
"MDL-67372","Task","Libraries",1,"Upgrade HTML Purifier to latest version","""HTML Purifier (/lib/htmlpurifier/) 4.10.0 --> 4.12.0: [http://htmlpurifier.org/] """
"MDL-67371","Task","Libraries",1,"Upgrade ADODB to latest version","""AdoDB (/lib/adodb/) 5.20.14 --> 5.20.15: http://adodb.sourceforge.net/"""
"MDL-67364","Bug","HTML Editor (TinyMCE)",0,"TinyMCE editor font sizes are too small in Classic theme (and other child themes)","""Currently, for child themes to have editor SCSS styles included (eg Boost includes Bootstrap), they must have them configured, and include their own SCSS file. The result is that themes such as Classic use TinyMCE's default fonts, which do not reflect what is displayed on the page once the input is saved, and in some cases are small enough to be difficult to read. This appears to be something I did not factor in as part of  MDL-62968.    I think rather than requiring copy/pasting of content into every theme, child themes should only need to include editor SCSS if they wish to override the parent theme, otherwise they should default to the value being used by the parent (this should also stop this problem arising again, as it has in the past with clean/bootstrapbase MDL-39424 and Boost MDL-60588).    Example (using TinyMCE's default in Classic):    !MDL-67364-TinyMCE_headings_before.png|thumbnail!"""
"MDL-67392","Bug","Forum|Language|Usability",1,"Forum information about timed discussion doesn't handle correctly ""displaystartdate"" and ""displayenddate"" containing quotes","""MDL-66481 introduced showing a """"Timed"""" label next to timed discussions.    But if """"displaystartdate"""" or """"displayenddate"""" contains quote (it's the case at least for french), the """"Timed"""" label is broken.    You can look at the discussion [https://moodle.org/mod/forum/discuss.php?d=393804] for details.    To replicate :   # create in a forum a timed discussion (tick display start and end dates)   # verify that forum list of discussions well shows the """"Timed"""" label   # make a language customisation of """"Forum"""" component, and modify """"displaystartdate"""" with """"It's display start: \{$a}."""" and """"displayenddate"""" to """"It's display end: \{$a}."""" and save modifications   # verify again forum list of discussions. It should still well show the """"Timed"""" label, but it's not the case     """
"MDL-67477","Task","General",3,"CLONE - Remove old class renames","""core_component looks for COMPONENT/db/renamedclasses.php files, it allows us to avoid traumatic transitions and BC breakages by listing classes that have been removed.    We need to clean the list at some point."""
"MDL-67476","Task","Other",0,"Migrate new JavaScript code from AMD to be ES6 - Sub task of MDL-67264","""Update the new AMD sections to be using ES6.    We agreed that from this point onward we should write any new JavaScript in ES6."""
"MDL-67498","Improvement","Enrolments",3,"Remove deprecated enrolment popup","""The old enrolment popup was replaced in MDL-59365. Files associated with the old UI should be removed.      """
"MDL-67533","Bug","Forum",2,"""Re"" duplicated in subject line (again)","""This issue that was fixed in MDL-65675 seems to have resurfaced again... This seems to happen in the experimental nested view."""
"MDL-67587","Improvement","Other",1,"Add searching of the recommended activities admin page","""Add the ability to search through all of the activities on the recommended activities admin page to narrow it down to a reasonable number, we will have thousands of entries on this page."""
"MDL-67586","Improvement","Other",3,"Update activity chooser to include recommended activities (Frontend)","""Add templates / JS (ES6) to the activity chooser to display recommended activities.    Related user stories:  ||User stories||Approaches||  |As a teacher, I can see a list of recommended elements in the modal|Recommended activities are displayed in the appropriate tab.|    * If there are no activities selected to be recommended, then the recommended tab is not shown.  * If there is no favourites tab being shown then the recommended tab should be shown. If there are no recommendations then the activity tab should be shown on display.  * Behat tests to cover the features mentioned above.  * Includes webservice call /modification.  * Also requires updated to webservice unit test."""
"MDL-67585","Improvement","Other",3,"New API for extending the activity chooser and implementation of favouriting","""Backend implementation of favouriting for the activity chooser.     Add unit tests to prove that this is working as intended.    Add favourites to webservice displaying the chooser  Add webservice for adding a favourite.  Add webservice for removing a favourite."""
"MDL-67584","Improvement","Other",3,"Front end implementation of indicating favourites with a star","""Implement the front end of favouriting for the activity chooser.  h3. User stories  ||Story||Approach||  |As a teacher, I should be able to star an element (applies to any elements in the modal)|When I click on the star, the star turns blue but does not disappear from the list. The element then appears on the starred page|  |As a teacher, I should be able to see only my starred elements| |  |As a teacher I should be able to unstar an element and it disappears from my list of starred activities.| |  h3. Acceptance criteria   * Each individual can star any activity listed in the activity chooser.   * Any item starred is displayed in the starred / favourites tab.   * Starred items remain in the current tab, as well as being added to the starred tab.   * Starring should be live. Clicking the star tab should show just starred activities.   * Activities in the favourite tab can be removed by clicking on the star. This can be done from the starred tab or any other location that the activity is shown.   * Behat tests must cover this functionality."""
"MDL-67594","Improvement","Tasks",3,"Deprecate supports_recursion() & extend_lock() in the Lock API","""If a lock type supports_recursion() then the locks behave very differently to when they don't.    Yet despite this not a single place in core actually calls for supports_recursion(), and if it did then it would have to do a code fork to work around the different behaviors. This feels like an architectural mistake in the design of the lock api, all lock implementations should behave identically so that calling code doesn't need to worry about things like this.    Given that the only place that leverages this is the unit tests, it is clear no one wants or needs it or is using this. I've had a bit of a quick search on github and in the wild for 3rd party uses and couldn't find any.    It's also trivial to workaround in the lock types that do support recursion to bring their behavior back in line to the locks which don't, as they already internally store a list of open locks for the current request and could just reject the second lock attempt."""
"MDL-67620","Bug","Other",1,"Course with LTI components throws error","""If you have LTI components defined in the course, the course_module_chooser_exporter throws a 'Exception - Call to a member function out() on string' error when the editing is enabled. """
"MDL-67663","Bug","Accessibility|Forum",1,"Forum grading submit grade form does not conform to accessibility guidelines","""* Navigate to the """"Grade Users"""" UI for a forum post   * Input a grade in the """"Grade"""" field   * Navigate back to the """"Next"""" link and click   * A screen reader perceivable message """"Grade saved for ..."""" is presented.         The accessibility and usability issues here can be parsed in a few ways:   * That the """"Next"""" element is marked up as a link doesn't conform to [WCAG 2.1 4.1.2|https://www.w3.org/WAI/WCAG21/Understanding/name-role-value] because, when data is present, it functions as a submit button. Users do not typically expect clicking a link to submit data. (There is arguably no 4.1.2 issue if there is no data in the """"Grade"""" field, because it is functioning as a link.)   * You could view the same issue as a [WCAG 2.1 1.3.1|https://www.w3.org/WAI/WCAG21/Understanding/info-and-relationships] nonconformance, since the relationship between the navigation and the form is not clear, and submitting data by not clicking a link is not semantics. (WCAG 1.3.1 generally hopes for valid semantics.)   * Since there are no instructions indicating that the way to submit the data is by clicking the link, the interaction does not really conform with the spirit of [WCAG 2.1 3.3.2|https://www.w3.org/WAI/WCAG21/Understanding/labels-or-instructions], which expects helpful instructions for forms.   * While the grade submitted status message is perceivable by screen readers, the is no indication that the student presented has updated (that the link has taken the user to a new student.) The new student's name and the """"X out of Y"""" change in context are not updated. so this does't conform to [WCAG 2.1 4.1.3|https://www.w3.org/WAI/WCAG21/Understanding/status-messages]. To demonstrate this, click the """"Next"""" button without data entered into the grade field. No status message is presented to the user even though the student displayed has been updated.   * Though not a strict accessibility nonconformance but a usability concern: when clicking the """"Next"""" or """"Previous"""" button, focus remains on the link, which may suggest to a screen reader user that nothing has changed when clicking it, especially when there is no status message. Moving focus to, say, the users name may help indicate to the user that clicking a link has in fact navigated to a new resource.   * Typically, in forms, submit buttons occur at the end of the form. Since the """"Next / Previous"""" buttons appear at the top of the form, and no explicit submit button is present, and no instructions are present, a user may be confused how to submit the form information. It can also be cumbersome to navigate to the end of the form to submit data, and then navigate back through the form to find the submit button.    I'm not sure whether these would be usability issues without testing with users with disabilities, and if they have said they have no issue with the UI, that's great. But if usability testing hasn't done, the overall interaction might be a candidate for testing and redesign.    In the mean time, adding instructions that clicking the Next button will submit data, if any data is present, and providing status updates that the UI has navigated to a new student, would present immediate accessibility improvements."""
"MDL-67675","Bug","H5P|HTML Editor (Atto)",0,"Cannot cut and paste if H5P button is added to the Atto toolbar","""As reported [https://moodle.org/mod/forum/discuss.php?d=393952] the Atto Editor in Moodle 3.8 does not support cutting.         To reproduce:   * open up the Atto editor in any activity   * type some text   * select some of this text   * hit Ctrl and X to cut   * Further down the page attempt to paste this text     What should happen:   * Text is pasted    What does happen:   * Nothing"""
"MDL-67721","Bug","Forum",0,"No 'View grade' button for single simple discussion forum","""A participant highlighted this in the Learn Moodle 3.8 Basics MOOC. When grading with a single simple discussion forum, there is no 'View grade' button.   I tested this on the Sandbox site and found the same. The student can see their grade in the gradebook, just not from a button in the forum.  So I then downloaded and restored the test course from MDL-66906 and discovered that all the forums offered for testing were of the 'standard discussion' type.  Was it a deliberate decision not to test or add the View grades button to other forum types or was it an oversight?"""
"MDL-67730","Improvement","Database SQL/XMLDB|Libraries",1,"Upgrade ADODB to a more later version (v5.20.16)","""We just upgraded to ADOBDB v5.20.15, but v5.20.16 has just been released early this year. -The latest version also fixes the ADODB's [PostgreSQL12 compatibility|https://github.com/ADOdb/ADOdb/commit/a4876f100602c2ce4760bb72d3050f73387adcca].-    Just realised that the fix for PostgreSQL 12 compatibility has already been fixed in v5.20.15. :P"""
"MDL-67813","Improvement","Content bank|H5P|Repositories",3,"Implement search functionality for the repository_contentbank","""*As a teacher*  *I want* to be able to search in the content bank repository by content's name  *So that* I can find the content I need to select in the file picker  h3. Acceptance criteria:   * Be able to search content by name in the content bank repository   * Reset search criteria to see all content in the content bank repository    h3. List of tasks:   * Implement needed methods or functions to search in the content bank repository.   * Design and implement search results view.   * Reset the search criteria in order to go back to 'see all' view."""
"MDL-67812","New Feature","Content bank|H5P|Repositories",3,"Create a new repository for the content bank","""*As a teacher*   *I want* to select from the file picker the H5P content created in the Content bank   *So that* I can reuse it easily everywhere (activities, resources...).  h3. Acceptance criteria:   * Create a new repository for users to be able to select and reuse content uploaded/created in the Content bank.   * Show the content in the content bank inside the file picker.   * Select content from this repository and attach it everywhere where the file picker is displayed.    h3. List of tasks:   * Create new repository_contentbank plugin skeleton   * Adapt or create DB tables as needed   * Create capabilities   * Implement the Privacy API or implement a null privacy provider and create a new issue   * Create a view for the content bank to be shown inside the repository_contentbank"""
"MDL-67846","Improvement","Forum",0,"Add name of user to fields included in forum exports","""When exporting a forum (discussions) to a CSV, Excel etc, it only includes the user ID field which is of little/no use to teachers/instructors. It would be great to include the user's names etc."""
"MDL-67845","Task","Enrolments",1,"Deprecate 'enrol_database_admin_setting_category' class","""Working on MDL-67278 we realize  'enrol_database_admin_setting_category' class could be deprecated and 'admin_settings_coursecat_select' used instead.     """
"MDL-67865","Bug","Accessibility",0,"Broken ARIA reference in the user menu","""h5. Issue  Broken ARIA references    An aria-labelledby or aria-describedby reference exists in the User drop down, but the target for the reference does not exist.  Fig. 0.03    h5. Impact on users  ARIA labels and descriptions will not be presented if the element referenced does not exist in the page    h5. Guidelines affected  * 1.3.1 Info and Relationships (A)  **  Information, structure, and relationships conveyed through presentation can be programmatically determined or are available in text.   * 4.1.2 Name, Role, Value (A)  ** For all user interface components (including but not limited to: form elements, links and components generated by scripts), the name and role can be programmatically determined; states, properties, and values that can be set by the user can be programmatically set; and notification of changes to these items is available to user agents, including assistive technologies.    h5. Recommendation  Ensure the element referenced in the aria-labelledby or aria-describedby attribute value is present within the page and presents a proper label or description.    h4. More info  From axe tool.    h5. Issue description  Ensures all ARIA attributes have valid values    h5. Element location      h5. Element source      To solve this violation, you need to:  Fix the following:  """
"MDL-67862","Bug","Accessibility|Messages",0,"Empty h3 tag in message deletion dialogue","""From the audit results:    h5. Issue  Empty headings    There is an empty H3 present in the """"Chat"""" area.  Fig. 0.01      h5. Impact on users   Screen reader users can call up a list of headings. Empty headings can cause confusion.     h5. Guidelines affected  * 1.3.1 Info and Relationships (AA)  **  Information, structure, and relationships conveyed through presentation can be programmatically determined or are available in text.   * 4.1.2 Name, Role, Value (A)  ** For all user interface components (including but not limited to: form elements, links and components generated by scripts), the name and role can be programmatically determined; states, properties, and values that can be set by the user can be programmatically set; and notification of changes to these items is available to user agents, including assistive technologies.    h5. Recommendation  Delete the empty headings"""
"MDL-67889","Task","Other",5,"Mirror drag and drop options when importing a resource from MoodleNet (tool_moodlenet all versions)","""Once we have received POST data from MoodleNet for a file that is not a backup, we eventually (depending on whether or not we  have the course/section or need to prompt the user for it - but that's another issue) need to present options to the user, asking them what module they'd like to use to handle the file import. We want to provide the same options that are presented during a drag and drop addition to a course. Drag and drop is handled by course module callbacks, specific to drag and drop. The objective here is to make use of that existing set of callbacks and present those same options to users conducting an import from MoodleNet into Moodle. Some notes on the way this works:   # Moodle determines what actions are most suitable based on the type of file. Use the \{mod_plugin}_dndupload_register() and \{mod_plugin}_dndupload_handle() for each module to put their hand up to say they handle a certain type of file.    So, what we want here is as follows:   # A plugin page which presents a list of options to the user, based on the dnd hooks.   # The page assumes the course and section have already been passed in (params to the page). E.g. In the workflow where the user starts in Moodle, MoodleNet POSTS back the course and section information to the import.php endpoint, so we have this already.   # If the page does not have a valid course and section, show an error.   # Once selected, the file should be downloaded (see MDL-68132) and then handed over to \{mod_plugin}_dndupload_handle() which will create the relevant content in the course.   # Once content is created (as above step), the user should be redirected to the course home page + section.   # This issue IS NOT scoped with creation of any course or section selection pages."""
"MDL-67888","Task","Other",3,"Handling Moodle course backup files from MoodleNet (tool_moodlenet all versions)","""This issue deals with MoodleNet resources which are Moodle course backups only. MDL-68094 deals with activity backups and is a follow on from this issue.    If, once the user has clicked 'Send to Moodle' in MoodleNet, the file is detected as an MBZ file, the user is presented with a plugin page, asking the user to confirm their intent to restore the course backup file into Moodle (see mocks for look and feel of this page). Options to 'Cancel and go back' and 'Restore' are presented.    If the user confirms the restore, the file should be downloaded by Moodle, and the user should be taken to the Step 1 of the restore process. They can then continue to restore the course as per the normal restore process. Downloading of the file into the relevant file area is handled by MDL-68132 and is a precursor to this issue.    If the user cancels the restore, then they are redirected back to the referring page on MoodleNet.    The acceptance criteria for this issue is as follows:   # The decision page should be presented to the user when both of the following are true:   -- MoodleNet posts to import.php AND   -- The file is an MBZ file.   # The look and feel of the decision page matches the mocks. This is a page, not a modal.   # If accepted, the restore can be completed in full and a new course is created.   # If cancelled, the user is sent back to dashboard.   # If the user isn't logged in to Moodle, and they decide to cancel and go back, this also needs to take them back to dashboard. I.e. the 'Cancel' aspect must work through the login process."""
"MDL-67887","Task","Other",5,"Create admin tool to deal with MoodleNet communication (tool_moodlenet all versions)","""This issue is a foundation for several others as it creates the admin tool plugin (tool_moodlenet) and the basic communication flow between MoodleNet and Moodle. More specifically, it provides the endpoint which MoodleNet can POST information about the file (as JSON) to.    This issue will help us to complete the following user story (it won't fully complete it because it only deals with the endpoint, not the processing + decision code):  ||User Story||Approach||  |As a teacher, after selecting a resource in MoodleNet,    I am redirected to my Moodle site where I can decide what   to do with the imported resource.|MoodleNet will POST information about the resource, as JSON,    to the Moodle endpoint. The endpoint will process the data and present the user with options for import.|  h3. Acceptance criteria:   * There is a new admin tool 'tool_moodlenet' created in core.   * The plugin provides an endpoint for MoodleNet to POST to   * MoodleNet should be able to POST to this endpoint (we need to simulate this in in testing in the first instance as it isn't built yet), regardless of whether a user is logged in or not and the POST data should be retained after login for use by the tool.   * The referring MoodleNet page should be captured and present as a param in the wantsurl.    -We require a plugin (admin tool) to handle receiving requests to include MoodleNet content into a course.-    -It has been suggested that the workflow could be similar to how plugins are installed from the plugin database (moodle.org).-   -Plugin workflow - The button to install a plugin is a base64 encoded string which contains information (name, component, version) related to the plugin to make a request back to fetch it later. - End plugin workflow.-   * -Checks need to be done as to whether accepting files from MoodleNet is allowed by the system.-   * -The user needs to be logged in with an authenticated account.-   * -After getting the file it then has to be decided what to do with it-   ** -Backup files to ultimately be restored.-   ** -Other file types to be handled with a call back to activity plugins.-   ** -An option to just put the file into the private files area of the user.-    ||User story||Approach||  |-As a teacher (in Moodle), I am redirected to my Moodle site, and the MoodleNet resource is processed so I can use it in my Moodle site-|-I am redirected to the 'import from MoodleNet' flow on my Moodle site. The details of the MoodleNet instance and details of the MoodleNet resource are included in the redirect-   -I am prompted to login if not already authenticated into Moodle. The flow should continue after logging in.-   -Moodle downloads the file to user's private files, analyses the file and the metadata provided by MoodleNet about the resource, and takes the following action based on the type:- * -Course/activity backup (MBZ): Moodle automatically commences the course/activity restore workflow- *   *    ** -I am prompted to select where I want to restore the course, or in which course and section I want to restore the activity.-   * -Any other file or link:-   ** -Moodle determines what actions are most suitable based on the type of file, and the user can choose among a sub-set of:-   *** -File resource-   *** -Label resource-   *** -Keep in private files-   *** -Page resource-   -***Link resource-   ** -If adding as a resource, I'm prompted to select which course and section I want to import the file or link in (with the course and/or section the flow started in pre-selected, when applicable).-   * -The file or link is added to the correct course and section, or file area (e.g. Private Files) as selected-|"""
"MDL-67885","New Feature","Other",3,"Add MoodleNet profile information into the user table / object / profile","""||User story||Approach||  |As a user I can add my MoodleNet profile details to my user profile|When creating or updating a user, there is a field for a link to the user's MoodleNet profile.|   * This is used to redirect the user to that profile when leaving Moodle to MoodleNet."""
"MDL-67884","New Feature","Other",1,"Add links to MoodleNet in Moodle (master)","""The desire is to guide users to MoodleNet via the activity chooser. The following users stories outline the areas to introduce these links.  ||User story||Approach||  |As a teacher (in Moodle) I can navigate to MoodleNet from the Activity Chooser, so I can find content for my course|See UX designs - there is a link in the footer, as well as another carousel pane, depending on whether the user has added a MoodleNet account on their profile or not.|  |-As a teacher (in Moodle) I can navigate to MoodleNet from an empty course page, so I can find content for my course-|-On a blank course page I am presented with:-   -Description of what I can find on MoodleNet, and that I will be directed out of the Moodle site-   -A link to MoodleNet-|  |-As a teacher (in Moodle) I can navigate to MoodleNet from the course gear menu, so I can find content for my course-|-The course gear menu has an item that links to MoodleNet-|  |-As a teacher (in Moodle) I can enter my MoodleNet profile URL on my profile page, so people can find my MoodleNet profile page from Moodle-   Handled in MDL-67885.|-An editable field for MoodleNet profile URL on the Moodle profile page-   -A link to the MoodleNet profile-   -MoodleNet instance URL to be derived from the profile URL-|  h3. Acceptance Criteria:   * There should be an admin setting (in adv features for now) """"Enable MoodleNet integration"""", defaulting to enabled.   * When the integration is enabled, there should be an image link in the footer of the activity chooser as per the mockups.   ** If the tool_moodlenet plugin is uninstalled (a possibility), then the link should just be a link to the MoodleNet site (checking the user's profile for a site as needed). This WILL NOT call the MoodleNet endpoint.   ** If the tool_moodlenet plugin is installed and the user DOES NOT HAVE a saved MoodleNet profile URL in their user profile, then the link will trigger a load of the MoodleNet selection pane in the chooser - as per UX mocks.   *** If a user enters a profile URL at this step, this is saved to their profile and this pane should not be seen again (again, as per UX mocks).   ** If the tool_moodlenet plugin is installed and the user DOES HAVE a saved MoodleNet profile URL in their user profile, then the link will be to the MoodleNet endpoint and will include the params:   *** The Moodle site URL (e.g. my.moodle.org)   *** The Moodle endpoint path (admin/tool/moodlenetendpoint.php)   * When the integration is disabled, there should be no link in the activity chooser footer."""
"MDL-67902","Bug","Accessibility|Calendar",2,"Calendar month view accessibility issues","""h5. Issue    _Strikethrough issues won't be done here (a comment has been added into the description, to clarify how they will be processed)._  h6. A   # The linked days of the month in the monthly view section read as """"1 link"""" or """"15 link"""" etc. The screen reader does not read the information that is provided on mouse focus which provides context.   # No label on the course filter, and the new event button. See [^screenshot-1.png] and [^screenshot-2.png].   # -2 errors were found using W3C Nu Validation Service and filtered to indicate WCAG errors only. See [^screenshot-3.png] and [^screenshot-4.png]- These errors have been fixed in MDL-67969.    h5. Affected guidelines  h6. A   * *Link Purpose (In Context):*   *2.4.4* The purpose of each link can be determined from the link text alone or from the link text together with its programmatically determined link context, except where the purpose of the link would be ambiguous to users in general.   * *Info and Relationships:*   *1.3.1* Information, structure, and relationships conveyed through presentation can be programmatically determined or are available in text.   * *Labels or Instructions:*   *3.3.2* Labels or instructions are provided when content requires user input   * *Parsing:*   *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features.    Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete.    h6. AAA   * *Link Purpose (Link Only):*   *2.4.9* A mechanism is available to allow the purpose of each link to be identified from link text alone, except where the purpose of the link would be ambiguous to users in general.    h5. Affected browsers   * All     """
"MDL-67901","Bug","Accessibility|Questions",2,"No label for clear my choice option on multiple-choice questions","""h5. Issue   * No label for clear my choice   * 2 errors were found using W3C Nu Validation Service and filtered to indicate WCAG errors only. See screenshot-2.    h5. Affected guidelines:  h6. A   * *Info and Relationships:*   *1.3.1* Information, structure, and relationships conveyed through presentation can be programmatically determined or are available in text.   * *Labels or instructions:*   *3.3.2* Labels or instructions are provided when content requires user input   * *Parsing:*   *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features.   Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete.    h5. Affected browsers:   * All"""
"MDL-67900","Bug","Questions",1,"Drag and drop info texts should mention that the question types are not accessible to visually impaired users","""h5. Issue    It has been decided that drag and drop questions are not meant to be accessible. We decided to expand the description of these questions to remind teachers about this when they are creating questions.   * -These question types are solely reliant on visual location to provide an answer:-   ** -Drag and drop onto image question type-   ** -Drag and drop marker question type-   * -There is an image of text present with insufficient alt text. See screenshot-1.-    h5. Affected guidelines  h6. A   * *Sensory Characteristics:*   *1.3.3* Instructions provided for understanding and operating content do not rely solely on sensory characteristics of components such as shape, size, visual location, orientation, or sound.    h6. AA   * *Images of Text:*   *1.4.5* If the technologies being used can achieve the visual presentation, text is used to convey information rather than images of text except for the following:   ** *Customizable:* The image of text can be visually customized to the user's requirements;   ** *Essential:* A particular presentation of text is essential to the information being conveyed.   * Note: Logotypes (text that is part of a logo or brand name) are considered essential.    h6. AAA   * *Images of Text (No Exception):*   *1.4.9* Images of text are only used for pure decoration or where a particular presentation of text is essential to the information being conveyed.    Note: Logotypes (text that is part of a logo or brand name) are considered essential.    h5. Affected browsers:   * All"""
"MDL-67899","Bug","Messages",0,"Emoji picker button does not have a description","""h5. Issue  The button to choose an emoji in the chat area is an empty button. The screen reader simply reads it as """"button"""" which does not make sense.    h5. Affected guidelines  h6. AAA  * 1.3.6  In content implemented using markup languages, the purpose of User Interface Components, icons, and regions can be programmatically determined.  """
"MDL-67917","Improvement","Course",1,"Create a single filter for tables and the AMD structure behind this","""The following is an approximation of the filter language used:        The initial part of the project will be to create a single {{filter}}. That is to say:  # A dropdown to select a pre-defined enumerated list for the Join Type (All, Any, None) for the current filter  # A dropdown to select a pre-defined enumerated list for the filterthing (Group, Role, etc.) for the current filter  # A way to select the values    For the initial work:  # we will only be creating a working interface, it will not have any effect on the data. Purely visual.  # I would advise chosing Status as this is a simple, enumerated list, with static values and low complexity;  # We will only create the initial {{filter}}. Not a full {{filterset}}    The follow-on work will then comprise of:  # Adding the remaining enumerated types (Groups, Roles, Enrolment methods)  # combining multiple filters into a {{filterset}}  # Adding the date since type. This is a _single_ value filter ([number] days) and no jointype  # Adding support for non-enumerated types (date since, keyword)    The initial work will _not_ be plumbed in. It will be an isolated interface until the backend is ready to receive it."""
"MDL-67915","Improvement","Course",1,"Update table_sql to support dynamic show/hide of columns","""Similar to MDL-67914 but supporting showing and hiding of a column"""
"MDL-67914","Improvement","Course",5,"Update table_sql to support dynamic sorting","""This is the first logical step after moving table_sql to have a generic web service.    This is likely the smallest possible change that we can make    We will need to:  # add new arguments to the web service:  ## {{sortby}} ({{string}}) A string describing the name of a sortable column  ## {{sortdir}} ({{int}}) The sort direction to use when sorting that column  # write a new set of AMD modules to handle capture of the sorting  # update our output of the table to instantiate our new JS    h3. JS  Root path: lib/table/amd/src  General structure:      Need to create a {{setup()}} function which listens on the outer-most element for the table (ideally a new {{<div>}} which the table is placed in.  We can keep any arguments in data-attributes on that div  We look for any clicks on any of the sort buttons and intercept  Call the WS and replace the {{<table>}} tag with the new one"""
"MDL-67924","New Feature","Other",1,"Move turn editing on button out of the edit menu on boost","""Move the turn editing on button (on a course page) out of the edit menu and immediately visible. Please see the screen shot for what this should look like"""
"MDL-67943","Task","Calendar|Libraries",3,"Update windows timezone list in core_date","""*GENERAL NOTE*: If the supported PHP versions were shipped with an older IANA timezone database version at some point, please use the timezone list from the older tz database version. For example, assuming the current supported PHP versions are 7.2, 7.3 and 7.4, and the current tz databse version is _2020a._ As the tz databse version 2020a was released on 23/04/2020, at some point 7.2, 7.3 and 7.4 (prior to 7.4.6) were shipped with the older tz database version. These sites will not have (support) the latest timezone changes from _2020a_ (timezone renaming, deprecation, etc.) and therefore, we should not use or map them in _$badzones_ or deprecate the old timezone strings.      *INSTRUCTIONS*    *PART 1*. Ensure that each windows timezone ([https://support.microsoft.com/en-us/help/973627/microsoft-time-zone-index-values]) exist in _$badzones_ (_lib/classes/date.php_) and have a mapping to current good (canonical) IANA timezone from the IANA timezone information database ([https://data.iana.org/time-zones/]). Please see *GENERAL NOTE* to determine which timezone database version should be used.    Also, ensure that all good IANA timezones have translations.    Resources that could help finding the equivalence between the Windows and the IANA timezones:   * [https://en.wikipedia.org/wiki/List_of_tz_database_time_zones]   * [https://github.com/unicode-org/cldr/blob/master/common/supplemental/windowsZones.xml]    *PART 2*. Ensure that old IANA timezones are not being used as target in the mapping in _$badzones_ (_lib/classes/date.php_). Every old IANA timezone used should be replaced with the good (canonical) IANA timezone. Please see *GENERAL NOTE* to determine which timezone database version should be used to find the old timezones.    Resources that could help finding the IANA timezone changes:   * [https://en.wikipedia.org/wiki/List_of_tz_database_time_zones]   * [https://data.iana.org/time-zones/tzdb-2020a/backward] (replace """"tzdb-2020a"""" if a different tz database version is required**)    *PART 3:* Ensure that there is a mapping between every old timezone and new timezone name in _$badzones_ (_lib/classes/date.php_). Please see *GENERAL NOTE* to determine which timezone database version should be used to find the old timezones.    Additional resources that could help finding the IANA timezone name changes:   * [https://www.php.net/manual/en/timezones.others.php]   * [https://en.wikipedia.org/wiki/List_of_tz_database_time_zones]   * [https://data.iana.org/time-zones/tzdb-2020a/backward] (replace """"tzdb-2020a"""" if a different tz database version is required**)    According to [https://en.wikipedia.org/wiki/List_of_tz_database_time_zones] the old timezone names are either deprecated or they are considered to be an alias to the good (canonical) timezone name.    For a clearer distinction, add the mappings for the deprecated timezones under the """"_A lot more bad legacy (deprecated) time zones._"""" section in _$badzones_ (lib/classes/date.php), while the aliases under """"_Link old timezone names with their new names._""""    NOTE: The general purpose of *PART 3* is to provide automatic timezone name changes, so when a calendar event or a user comes with Asia/Calcutta, the event or user is changed to Asia/Kolkata (or whatever is the new timezone name is). Also, in the future this can be expanded (in followups) for user edit and user upload.    *PART 4:* Deprecate and remove the existing translations (_lang/en/timezones.php_) of the old IANA timezones. Please see *GENERAL NOTE* to determine which timezone translations are safe to be deprecated and removed.    ------------------------     For the testing instructions you can manually edit the .ics file from the cloned issue:   # Open the .ics file using a text editor.   # Replace the timezone ID there (i.e. """"U.S. Mountain Standard Time"""") to one of the new ones added.   # Replace the time entries (i.e. """"202001"""" (2020 is the year and 01 the month) to a more recent date).    ------------------------    _Please create a clone of this issue for next version before closing this_"""
"MDL-67970","Bug","Accessibility|Course",1,"Course homepage: Editing mode on: Accessibility issues","""h5. Issues  h6. A   * Missing label. See [^Fig. 7.01.png]   * Errors were found using W3C Nu Validation Service and filtered to indicate WCAG errors only.    h6. AA   * Colour contrast #25    h6. AAA   * There are multiple """"More help"""" links which all point to different locations.    h5. Affected guidelines  h6. A   * *Labels or Instructions*  *3.3.2* Labels or instructions are provided when content requires user input   * *Parsing:*  *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features. Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete.    h6. AA   * *Non-text Contrast:*   *1.4.11* The visual presentation of the following have a contrast ratio of at least 3:1 against adjacent color(s):   *User Interface Components*   Visual information required to identify user interface components and states, except for inactive components or where the appearance of the component is determined by the user agent and not modified by the author;   *Graphical Objects*   Parts of graphics required to understand the content, except when a particular presentation of graphics is essential to the information being conveyed.    h6. AAA   * *Link Purpose (Link Only):*  *2.4.9* A mechanism is available to allow the purpose of each link to be identified from link text alone, except where the purpose of the link would be ambiguous to users in general.    h5. Affected browsers   * All"""
"MDL-67969","Bug","Calendar",2,"Calendar: View event details: Accessibility issues","""h5. Issues  h6. A   * 2 errors were found using W3C Nu Validation Service and filtered to indicate WCAG errors only. See [^Fig. 1.01.png] and [^Fig. 4.03.png]    h5. Affected guidelines  h6. A   * *Parsing:*  *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features. Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete."""
"MDL-67968","Bug","Accessibility|Calendar",2,"Calendar: New event: Accessibility issues","""h5. Issues    Strikethrough issues won't be done here (a comment has been added into the description to clarify how they will be processed).  h6. A   # No label. See:   ** [^Fig. 5.01.png]. This is a false positive. WAVE complains about missing label for a select element that is hidden. not only by visibility: hidden; display: none; style, but also by aria-hidden=""""true"""", so nothing will be done here.   ** [^Fig. 5.02.png]   ** [^Fig. 5.03.png]   # -Errors were found using W3C Nu Validation Service and filtered to indicate WCAG errors only-. Nothing to do here because these errors will be done in:   ** -Duplicate ID for site blocks-. Fixed as part of MDL-67969   ** -Invalid 'for' attribute for the course selector on the view calendar page-. Fixed as part of MDL-67902    h6. AA   # -Colour contrast #3, #4-. Will be addressed on MDL-64494    h6. AAA   # -There is a loss of data after a re-authentication-. This has been left out as it was AAA and as it required a massive amount of work and a lot of code refactoring   # Abbreviations such as """"Sun"""", """"Mon"""" etc. are not fully explained. Even well known abbreviations need to either be expanded on the first use on a page or that a link to a glossary or list of terms be provided       h5. Affected guidelines  h6. A   * *Info and Relationships:*   *1.3.1* Information, structure, and relationships conveyed through presentation can be programmatically determined or are available in text.   * *Labels or Instructions*   *3.3.2* Labels or instructions are provided when content requires user input   * *Parsing:*   *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features. Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete.    h6. AA   * *Non-text Contrast:*   *1.4.11* The visual presentation of the following have a contrast ratio of at least 3:1 against adjacent color(s):   *User Interface Components*   Visual information required to identify user interface components and states, except for inactive components or where the appearance of the component is determined by the user agent and not modified by the author;   *Graphical Objects*   Parts of graphics required to understand the content, except when a particular presentation of graphics is essential to the information being conveyed.    h6. AAA   * *Re-authenticating:*   *2.2.5* When an authenticated session expires, the user can continue the activity without loss of data after re-authenticating.   * *Abbreviations:*   *3.1.4* A mechanism for identifying the expanded form or meaning of abbreviations is available.    h5. Affected browsers   * All"""
"MDL-67976","Improvement","Course",0,"Create filter classes","""Rather than passing in arbitrary strings, arrays, ints, and other values into tablelib to describe filter values, it would be beneficial to describe possible values more accurately.    I would like to propose that we implement a set of value classes for filtering.        """
"MDL-67982","Task","Other",5,"Investigation of potential MoodleNet approaches","""MDL for tracking time and discussions surrounding the project. Sub task of MDL-67883"""
"MDL-68014","Bug","Accessibility|External Tool (IMS-LTI)",1,"Redundant alt text for preconfigured LTI tools in activity chooser","""To replicate:   # Create a [pre-configured LTI tool|https://docs.moodle.org/38/en/External_tool_settings#Site_administration_settings] and show it in both activity chooser and as a preconfigured tool.   # Go to a course   # Turn editing on and add a new activity.   # Inspect the preconfigured tool using an accessibility tool (e.g. axe, wave)   # Expected: There should be no accessibility issues   # Actual: A redundant alt text issue is being shown. E.g. on axe,  """
"MDL-68019","Improvement","Course|Favourites",1,"Improve favourites performance for the activity chooser","""There are 2 parts to this:    The first, is an addition to the existing API, to address a situation encountered in MDL-67585. This situation is when a component wishes to store favourites for an area using multiple different itemtype strings. In such a case, we'd like to be able to get the favourites for all the item types at once - at present, this must be done via multiple API calls to find_favourites_by_type.    The second is to update the calling code in content_item_readonly_repository, to use the single new API call instead of several calls in a loop (the current situation).     """
"MDL-68030","Improvement","Course|Other",3,"Finalise the final layout of various Activity chooser elements","""During the development of the activity chooser we have been focused on the functionality of the chooser and eye balling the designs.    Here, we want to ensure we match the designs and handle any unexpected cases in the designs and make sure we handle the responsiveness of the modal and items within it.    I can foresee some changes will have to be made as the original design had a reduced number of activities than we have in core so either scrolling or a larger modal will have to be used.    Link to invisio [here|https://projects.invisionapp.com/share/49UI6T8R2AK#/screens/388682476]"""
"MDL-68051","Bug","Accessibility|Course",1,"Some more accessibility issues for the tabs and tab panels in the revamped activity chooser","""Seems like we missed some items about the accessibility of the tabs for the activity chooser.  h5. Switching tabs    The keyboard navigation between the tabs and their respective tab panels seem to be broken after switching between tabs. To reproduce:   #    ## Switch to another tab using the keyboard.   ## Press tab again. Expected behaviour:    However, the focus does not move to the tab panel.    h5. Number of tabs   # Even when the Favourites or Recommended tabs are hidden, the screen reader keeps announcing that there are 3 tabs on the list. This will be confusing to the user.    h5. Axe   # Axe is reporting the following violation about the tab list:    Perhaps we can render the tab list as not an unordered list, similar to [https://www.w3.org/TR/wai-aria-practices/examples/tabs/tabs-2/tabs.html?]    h5. Tabs keyboard navigation   #  Tabs keyboard navigation is not working in certain browsers (ex. Firefox).   This is due to the usages of 'e.srcElement' which is not supported in every browser.      """
"MDL-68056","Improvement","Course",3,"Improve performance of course_section_add_cm_control()","""This method is called once per course section and currently handles a few cases:   # If $THEME->enablecourseajax == true AND $course->id == $this->page->course->id AND $usermodchooser == true (a user pref), then display the """"Add an activity or resource"""" link allowing the chooser modal to be opened.   # If $THEME->enablecourseajax == true AND $course->id == $this->page->course->id AND $usermodchooser == false (a user pref), then display fallback 1 - a control including two lists of resources and activities which, when selected, take the user to the creation page for that module.   # If $THEME->enablecourseajax == true AND $course->id != $this->page->course->id, then display fallback 1 - a control including two lists of resources and activities, which, when selected, take the user to the creation page for that module.   # If $THEME->enablecourseajax == false, then display fallback 1 - a control including two lists of resources and activities which, when selected, take the user to the creation page for that module.   # If JS is disabled in the browser (not a case we support any more), then fallback 2 is shown - a control including the same two lists of resources and activities plus a 'Go' submit button. The user needs to select the activity/resource and then click 'Go' in this fallback case.    Fallback 1 and 2 are handled by the same code - it's just that when loaded in a browser without js enabled, the 'Go' button is shown (it's inside a <noscript> tag)    The way this method is currently structured is such that we always generate the fallback control HTML. I.e. every time this method is called, which is once per course section, this is created. Then, if the theme supports course ajax (provided the course also matches the page course, as above), then we wrap that entire fallback HTML inside <noscript> tags and append the link control to the output string before returning.    I think we can clean this up. We don't have any obligation to support the """"I disabled JS in my browser"""" case as we have been JS dependent for some time now. We should therefore be able to do one of two things depending only on the courseajax support:   # Render fallback control 1 in cases where:   -- The theme sets $THEME->enablecourseajax to false or;   -- $THEME->enablecourseajax is true but course doesn't match the this->page->course or;   -- The user has disabled the modchooser in their user prefs.   -- We're running in Behat, since many behat setup steps expect the step _I add a """"x"""" to section """"y"""" and I fill the form with_ to work without JS.   # Render the link control in cases where the $THEME->enablecourseajax is true and the course matches the $this->page->course and the user preference allows for the chooser.    This would mean we're likely going to reduce DB calls, and reduce the volume of code we're running on every course home load - when editing is enabled, of course."""
"MDL-68055","Bug","Course",1,"Module description text not formatted during export","""This needs to be handled as FORMAT_MARKDOWN via format_text in the exporter."""
"MDL-68076","Improvement","General",5,"Create ""Feedback"" link in Moodle to permanent survey site","""To facilitate data collection from as broad a sample of Moodle users as possible, we should add a link within Moodle to a permanent URL on which surveys will be placed (e.g. """"https://feedback.moodle.org"""". At minimum, this landing page will always display a simple """"NPS"""" (net promoter score) survey. The landing page may also offer other questions or links to other surveys.    I suggest that the link be implemented as an icon in the header using the """"Bullhorn"""" icon from FontAwesome, to match the """"Feedback"""" activity. The icon should appear next to the existing Messaging and Notifications icons.    Attention should be drawn to the link by incorporating a User Tour for the 3.9 release.    Roll-over of the icon should display the text """"Give feedback on Moodle LMS"""". Clicking the icon should offer a popup with a short message: """"Click here to give feedback on the Moodle LMS"""" or similar.    Site administrators should have the option of disabling the feature. Whether the feature is enabled or not should be recorded in Site Registration data.    Site administrators who have registered their Moodle site should have an option to review and retrieve responses from their site only. Additional analysis tools may follow later.    A partner portal access to review data from sites hosted by that partner is also a possible future enhancement.    In addition to taking the user to the landing page, the link should also include the following information about the user in URL parameters:   * Site URL (can be used to tie responses to a registered site)   * Site short name   * User's preferred language (used to direct to a language-specific survey, if available)   * First three octets of user's URL, for coarse geographical location (allowable within GDPR, because the last octet is omitted)   * Length of time the user's Moodle account has been active on this site   * The type of page the user was on when they clicked the icon   * Any roles the user has in the context in which they clicked the icon   * Detailed Moodle version   * Name of Moodle theme and version    This data will be collected and recorded by the landing page, along with the timestamp and responses to questions on the landing page.    User clicks on the Feedback link should be logged in Events.   * [LimeSurvey|https://limesurvey.org/]   * LimeSurvey is open source survey software built in PHP. The Community version is well suited to Moodle's needs.   * Can be hosted at feedback.moodle.org (or whatever permanent URL is desired)   * Supports many standard question types   * Can accept parameters via URL, allowing key user information to be passed from the user's Moodle site (see below). This is called the [Start URL|https://manual.limesurvey.org/URL_fields#Start_URL]   * Conditional survey questions are possible using the """"Relevance"""" feature   * Supports fully anonymized responses, but this will nullify the submission date.   * Built in [statistical reports|https://manual.limesurvey.org/Statistics] for numerical/menu questions   * Exports to many kinds of analysis software, including R, SPSS, Excel, LibreOffice, etc.   * Can present the same survey in [multiple languages|https://manual.limesurvey.org/Question_type_-_Language_switch]. LimeSurvey can attempt to pre-populate this value from the user's language preference setting in Moodle via URL parameters.   * Supports [CAPTCHA codes |https://manual.limesurvey.org/Publication_%26_access]   * Can set a cookie to prevent repeated participation, but I don't recommend this unless the survey is reset regularly, e.g. monthly. (Data could still be combined for analysis.)   * Supports [geographic location from IP address|https://manual.limesurvey.org/Global_settings#General] using IP-Info-DB service or Google Maps – the free version is accurate to the country level, so complies with GDPR but still provides useful data. Try it here: [https://ipinfodb.com/]    * Outstanding advice on [how to design a good survey|https://manual.limesurvey.org/How_to_design_a_good_survey_(guide)]    h3. How to prepopulate questions via URL:    Question responses can be pre-filled in LimeSurvey by using URL arguments. The question is identified using a [SGQA identifier|https://manual.limesurvey.org/SGQA_identifier] constructed from the survey ID, group (question group) ID, question ID, and, if relevant, choice ID. These are combined into a single parameter delimited by """"X"""", as shown below. Multiple choice question codes need to be constructed differently, using question codes instead of IDs and  """"_"""" instead of """"X"""". (Note that there is another method of prefilling using [qcode naming|https://manual.limesurvey.org/URL_fields/en#Start_URL] via [panel integration|https://manual.limesurvey.org/Panel_integration], but it only seems to work with free text questions.)  h3. Examples:    {color:#de350b}*Survey ID*: 282444{color} (this will change when survey is implemented on permanent site)    {color:#00875a}*Group ID*: 2{color} (all the optional questions are in Group 2, the mandatory NPS questions being in Group 1)  ----  *Specific questions*:         *_How long have you been using Moodle LMS?_*    {color:#4c9aff}*Question ID*: 4{color}         Question type: Single choice answer         {color:#ff8b00}*Answer Option codes:*{color}   * {color:#ff8b00}AO01{color} Less than one month   * {color:#ff8b00}AO02{color} Less than one year   * {color:#ff8b00}AO03{color} Less than 3 years   * {color:#ff8b00}AO04{color} Three years or more         To prepopulate the response """"Less than one year"""", based on the """"First access to site"""" value for the user on clicking the Feedback link, include this string in the URL:         &*{color:#de350b}282444{color}X{color:#172b4d}2{color}X4*={color:#ff8b00}*AO02*{color}  ----  *_What version of Moodle LMS are you using?_*    {color:#4c9aff}*Question ID*: 5{color}         Question type: +short free text+ (to allow multiple decimal points). Note: it is possible to use a regular expression to validate this text.         To prepopulate """"3.8dev+ (Build: 20191105)"""" from server environment:    &*{color:#de350b}282444{color}X{color:#00875a}2{color}X{color:#4c9aff}5{color}*={color:#ff8b00}*3.8dev%2B%20%28Build%3A%2020191105%29*{color}       ----  *_What mode of instruction do you use with Moodle LMS?_*    {color:#4c9aff}*Question code*: G02Q05{color} _(Note that this question type uses a different option format)_    Question type: Multiple choice answer (check all that apply)    *{color:#ff8b00}Answer Option codes{color}:*   * {color:#ff8b00}SQ01{color} Face to face   * {color:#ff8b00}SQ02{color} Fully online   * {color:#ff8b00}SQ03{color} Blended or hybrid    To prepopulate """"Face to face"""" AND """"Blended or hybrid"""" from Analytics Site Settings:    &*{color:#4c9aff}G02Q05{color}*_*{color:#ff8b00}SQ01{color}=Y*&*{color:#4c9aff}G02Q05{color}*_*{color:#ff8b00}SQ03{color}=Y*         Example:    [http://gaeacoop.org/limesurvey/index.php/282444?newtest=Y&lang=en&G02Q05_SQ01=Y&G02Q05_SQ03=Y]  ----  *_What type of institution do you use Moodle LMS in?_*    {color:#4c9aff}*Question code*: G02Q06{color}     Question type: Multiple choice answer (check all that apply)    {color:#ff8b00}*Answer Option codes:*{color}   * {color:#ff8b00}SQ01{color} Academic   * {color:#ff8b00}SQ02{color} Corporate training   * {color:#ff8b00}SQ03{color} Non-governmental organization (NGO)         To prepopulate """"Academic"""" from Analytics Site Settings:    &{color:#4c9aff}*G02Q06*{color}_*{color:#ff8b00}SQ01{color}=Y*    [confirmed correct]    [http://gaeacoop.org/limesurvey/index.php/282444?newtest=Y&lang=en&G02Q06_SQ01=Y]  ----  *_What level of learning do you use Moodle LMS with?_*    *Question ID*: 6    *Question code*: G02Q07    Question type: Multiple choice answer (check all that apply)    *Answer Option codes:*   * SQ01 Early childhood education   * SQ02 Primary education   * SQ03 Lower secondary education   * SQ04 Upper secondary education   * SQ05 Post-secondary non-tertiary education (may include corporate or community/NGO training)   * SQ06 Short-cycle tertiary education (may include corporate or community/NGO training)   * SQ07 Bachelor or equivalent level   * SQ08 Master or equivalent level   * SQ09 Doctor or equivalent level         To prepopulate """"Bachelor or equivalent level"""" AND """"Master or equivalent level"""" from Analytics Site Settings:    &*G02Q07_**SQ07=Y*&*G02Q07_**SQ08=Y*    [confirmed correct]    [http://gaeacoop.org/limesurvey/index.php/282444?newtest=Y&lang=en&G02Q07_SQ07=Y&G02Q07_SQ08=Y]       ----  *_How do you use Moodle LMS?_*    *Question ID*: 34    {color:#4c9aff}*Question code*: G02Q08{color}    Question type: Multiple choice answer (check all that apply, *allows """"Other"""" with a short text box*)    *{color:#ff8b00}Answer Option codes{color}:*   * {color:#ff8b00}SQ01{color} Student   * {color:#ff8b00}SQ02{color} Teacher   * {color:#ff8b00}SQ03{color} Non-editing teacher   * {color:#ff8b00}SQ04{color} Course creator   * {color:#ff8b00}SQ05{color} Manager   * {color:#ff8b00}SQ06{color} Site administrator         To prepopulate """"Student"""" AND """"Teacher"""" AND """"{color:#ff8b00}Other{color}"""" and name of custom role """"{color:#403294}Pilot tester{color}"""" from user's role when they click the Feedback link:         &*{color:#4c9aff}G02Q08{color}*_*{color:#ff8b00}SQ01{color}=Y*&*{color:#4c9aff}G02Q08{color}*_*{color:#ff8b00}SQ02{color}=Y*&{color:#4c9aff}*G02Q08*{color}_*{color:#ff8b00}other{color}={color:#403294}Pilot%20tester{color}*    [confirmed correct]    [http://gaeacoop.org/limesurvey/index.php/282444?newtest=Y&lang=en&G02Q08_SQ01=Y&G02Q08_SQ02=Y&G02Q08_other=Pilot%20tester]         If we need to capture multiple """"other"""" roles, they can be delimited using any URL-legal character.       ----  *_What is the URL of your Moodle LMS site?_*    *Question ID*: 41     Question type: short free text. Note: it is possible to use a regular expression to validate this text.    *Including this question will allow linking the results to the site registration if the site is registered, so the site administrator can view a summary of responses.*         To prepopulate """"https://learn.moodle.net"""" from server environment:    &*282444X2X41*=*https%3A%2F%2Flearn.moodle.net*    [Confirmed correct]    [http://gaeacoop.org/limesurvey/index.php/282444?newtest=Y&lang=en&282444X2X41=https%3A%2F%2Flearn.moodle.net]       ----  *_In which country do you use Moodle?_*    *Question ID*: 42         Question type: short free text.     Limesurvey can automatically prepopulate the [geographic location from IP address|https://manual.limesurvey.org/Global_settings#General] using IP-Info-DB service or Google Maps – the free version is accurate to the country level, so complies with GDPR but still provides useful data. Try it here: [https://ipinfodb.com/]     This method requires registering with the IP-Info-DB service, Google Maps, or OpenStreetMaps to get an API key.    This data could also be drawn from the user's """"Country"""" value:    To prepopulate """"Canada"""" from the user's profile:    &*282444*X*2*X*42*=*Canada*    [confirmed correct]    [http://gaeacoop.org/limesurvey/index.php/282444?newtest=Y&lang=en&282444X2X42=Canada]       ----  h3. Analysis:         While LimeSurvey presents useful statistics per individual question, we need a deeper analysis of the relationships between questions and of the contents of free text responses. Data can be exported from LimeSurvey into a number of formats. From that data, I describe below how an analysis could be conducted in R. Obviously, there are many statistical software packages that could be used for this process. R is open source and has a huge support base, including many specialty packages for specific analyses. In particular, there are some highly useful text analysis tools that will be critical to extracting data from very large volumes of free text responses.        # Calculate mean and median raw NPS scores and standard deviation   # Calculate NPS using standard formula: on a 0-10 question, 0-6 are considered Detractors [-1], 7-8 are considered Passive [0], 9-10 are considered Promoter [+1]. Save this categorization per entry. Subtract the percentage of Detractors from the percentage of Promoters to determine NPS.    # Chi-Square analysis:   # determine if there are any significant roles / institution types/languages etc. that are especially happy/unhappy. This is done by using the """"promoter"""" positive value as a binary, and choosing        # Coarse region analysis based on IP address of respondents (primarily used for estimating survey coverage in this project)    There are other lexical analyses that could be performed, e.g. using Sentiment Analysis. See [https://docs.google.com/document/d/1vt8dAf9S0jaHGQdEuL-crFSDfMmTeFHXQVgeXC8D5zE] for more information."""
"MDL-68112","Improvement","Course",1,"The search icon container in the activity chooser search bar should use bootstrap classes","""The search icon container in the activity chooser search bar should use the existing bootstrap class ('input-group-append') instead of creating a custom alternative one.    (https://tracker.moodle.org/browse/MDL-67263?focusedCommentId=785671&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-785671)"""
"MDL-68111","New Feature","General",1,"Core setting to toggle MoodleNet features globally (master)","""Essentially just a feature toggle, but it won't be impacting anything in this issue.    Some things it will affect in future:    - The MoodleNet admin tool will check this to decide whether it permits communication to/from MoodleNet.  - The activity picker will present the link to MoodleNet in the footer if this setting is enabled.    """
"MDL-68135","Bug","Accessibility|Course",1,"Course homepage: View mode: Accessibility issues","""h5. Issues  h6. A   * Errors were found using W3C Nu Validation Service and filtered to indicate WCAG errors only.   * -Orphaned form labels. See Fig. 8.01- --> this is related to the videojs player we use in Moodle. Reported the issue upstream [here|https://github.com/videojs/video.js/issues/6516]    h6. AA   * -Colour contrast #3, #25, #26.- --> addressed at MDL-64494    h6. AAA   * -Abbreviations such as """"KB"""" and """"PDF"""" are not fully explained. Even well-known abbreviations need to either be expanded on the first use on a page or that a link to a glossary or list of terms be provided.- --> left out for now. see details in comments.    h5. Affected guideline  h6. A   * *Parsing:*   *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features.    Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete.   * *Labels or Instructions*   *3.3.2* Labels or instructions are provided when content requires user input    h6. AA   * *Non-text Contrast:*   *1.4.11* The visual presentation of the following have a contrast ratio of at least 3:1 against adjacent colour(s):   *User Interface Components*   Visual information required to identify user interface components and states, except for inactive components or where the appearance of the component is determined by the user agent and not modified by the author;   *Graphical Objects*   Parts of graphics required to understand the content, except when a particular presentation of graphics is essential to the information being conveyed.    h6. AAA   * *Abbreviations:*   *3.1.4* A mechanism for identifying the expanded form or meaning of abbreviations is available.    h5. Affected browsers   * All"""
"MDL-68134","Task","Other",5,"Page for selecting which MoodleNet instance to go to (tool_moodlenet 3.7 and 3.8)","""This view is seen in the activity chooser in master, as a pane, but must be a plugin page in Moodle 3.7 and 3.8.     The acceptance criteria for this page are as follows:  # The look and feel of the page should match the mocks, albeit as a page not a pane.  # This page does not need to be linked to from anywhere in this issue.  # Entering a profile url and saving should:  #- Validate the profile URL syntax  #- Save the profile URL into the user's 'MoodleNet profile URL' custom field  #- Redirect the user to the respective MoodleNet endpoint - there is a method to generate this endpoint - see MDL-68140."""
"MDL-68131","Task","Other",1,"Add 'enablemoodlenet' setting to tool_moodlenet (tool_moodlenet 3.7 and 3.8)","""This setting currently lives in core on master but we need to provide it as part of the plugins for 3.7 and 3.8.    Acceptance criteria:  # New setting 'enablemoodlenet' added to the stable versions of the tool_moodlenet plugin.  # This setting should default to 'yes'.  # The help text for this setting should match master (see string in MDL-68111)"""
"MDL-68130","Task","Other",1,"Add method which returns MoodleNet link (tool_moodlenet 3.7 and 3.8)","""On stable branches, where we provide two plugins, the mod_moodlenet plugin needs to be able to ask the tool_moodlenet plugin for the MoodleNet endpoint for a given user. The module will then redirect the user there, initiating the MoodleNet browse-and-import process.    This URL can be one of two things:   # A URL to a tool_moodlenet page asking the user to either enter their MoodleNet profile URL or proceed to the global MoodleNet instance. This page will have been created in the blocker - MDL-68134.   # A user-specific MoodleNet URL, which WILL kick off the browse-and-import process with MoodleNet. This URL is based on the value of their custom profile field 'MoodleNet profile URL' (it uses only the site portion after the '@'). This URL MUST include two params 'site' and 'path':   -- Site must be a the URL of the Moodle site, url-encoded. E.g. institution.edu.   -- Path must be the path to the MoodleNet import endpoint, including course and section params, and should also be url-encoded. E.g. admin/tool/moodlenet/import.php?course=X&section=Y)    An example of the syntax of the complete URL is:   something.moodle.net?site=ENCODEDSITE&path=ENCODEDPATH    The acceptance criteria for this task is as follows:   # The method must be callable by another plugin and should take in params 'course' and 'section'.   # The method must return the user-specific MoodleNet URL if set in the user's custom profile field. Otherwise, if not set, it must return the URL of the tool_moodlenet page allowing the user to select the MoodleNet instance to go to (this page is created in MDL-68134)."""
"MDL-68129","Task","Other",1,"Create mod_moodlenet activity (mod_moodlenet 3.7 and 3.8)","""This plugin is part of a set (the set also includes an admin tool, 'tool_moodlenet') to be provided, via the plugins db, to sites on versions 3.7 and 3.8 of Moodle.    Acceptance criteria:    A minimal plugin which:  # Provides an implementation of get_shortcuts(), providing one single resource called  'MoodleNet' with relevant explanatory text in the description (text TBC).  # Provides a modified edit_form.php, which just redirects to a MoodleNet url (with params) instead of loading up the normal mod edit form. This allows the chooser to present the required MoodleNet item to the users, and allows them to be sent to MoodleNet via the edit_form.php page.  # The edit_form.php page asks the tool_moodlenet plugin (part of a set) for the MoodleNet URL for a given user and uses this link in redirection.  # mod_moodlenet: Fix edit.php so it correctly uses 'section' and not 'sr' (annoyingly, section return is something else entirely).  # Passes unit tests relating to privacy and is ready for deployment to the plugins DB."""
"MDL-68142","Task","Other",3,"Code to migrate the feature toggle from the plugin settings to core (tool_moodlenet master only)","""This is required so that sites can upgrade from 3.7 or 3.8 to master and retain their feature toggle state.    The way this should work is that the plugins have a version (say 2020030500) while the master plugin will be on a higher version (say 2020031000). In the master upgrade code for the tool, we want to read the tool setting and write it to the core setting.    Acceptance criteria for this issue is as follows:   # 3.7 or 3.8 should be able to upgrade to master and the value of their feature toggle should carry over to the core setting in master.   # This should work when the toggle is true or false i.e. works regardless of state.   # Put a comment in version.php in the plugin to make sure it doesn't ever exceed a certain version number in master."""
"MDL-68141","Task","Other",3,"Add page for selecting a course (tool_moodlenet all versions)","""This should be in all versions of the tool in the first iteration. Later, it will be replaced in master.    The mockups are still pending for this issue, however the functional acceptance criteria is as follows:  # When receiving a POST from MoodleNet (when the user clicks the 'Send to Moodle' button in MoodleNet - use the test client!), the tool should take the user to this new course selection page ONLY if the course param IS NOT set in the request to the import URL.  E.g. 1. Data POSTed to site/admin/tool/moodlenet/import.php?course=3&section=5 will NOT take the user to this new page. This represents an import where the user started in Moodle.  E.g. 2. Data POSTed to site/admin/tool/moodlenet/import.php will take the user to this new page. This represents an import where the user started in MoodleNet.  # The page should allow a course to be clicked. Clicking a course should send the user directly to the options selection page (MDL-67889) with relevant params (see next point)   # When sending the user to the options selection page (67889), the course id should be passed in, and section 0 (the first section) should be used. There is no section selection process in the first iteration."""
"MDL-68140","Task","Other",3,"Create a method which returns a MoodleNet endpoint (tool_moodlenet all versions)","""Several issues need a method to generate a MoodleNet endpoint URL for a given profileurl and return path.     The way this URL is created is as follows:    # Take the users MoodleNet profile URL which will be in the format """"@name@their.moodlenet.site), grabbing the site portion only.  # Assume a fixed MoodleNet path of '/endpoint' for now (this is being worked on by the MoodleNet team)  # Append the endpoint to the site URL - e.g. their.moodle.site/endpoint  # Next, we need to pass 2 params to this endpoint - site and path - which represent the site and path we want MoodleNet to send users back to, once content is selected.  #- Site: this is the Moodle site URL, urlencoded. E.g. urlencode('my.moodle.site')  #- Path: this is the path to our MoodleNet plugin import endpoint, urlencoded, and can include params itself (this is important for getting back the course and section). E.g. urlencode('admin/tool/moodlenet/import.php?course=2&section=4')  # The endpoint should now look like:  their.moodle.site/endpoint?site=ENCODEDSITE&path=ENCODEDPATHWITHPARAMS    The acceptance criteria for this issue are as follows:  # Generated URL should match the above syntax.  # Unit tests to confirm the params and can be urldecoded and match the inputs.  """
"MDL-68139","New Feature","Other",3,"Tool MoodleNet plugin branches","""This issue just contains the reviewed and merged commit for the respective versions of the plugin. The plan is to split 3.7 and 3.8 out into stand alone plugins for distribution once we're happy with them."""
"MDL-68148","Bug","Accessibility|Course",1,"Course participants: Main: Accessibility issues","""h5. Issues  h6. A   * -At the bottom of the table there is a dropdown menu. If you press the down arrow, it will automatically open a dialogue window for """"Send message to 1 person"""".- --> Deferred to MDL-68378   * -Missing form label. See Fig. 9.01- --> false positive   * Errors were found using W3C Nu Validation Service and filtered to indicate WCAG errors only.    h6. AAA   * The First name and surname links (A - Z) do not make sense out of context. There are links with the same title text such as """"Edit enrolment"""" and """"Unenroll"""", each pointing to a different location.   * -Abbreviations such as """"mins"""" and """"Docs"""" are not fully explained. Even well-known abbreviations need to either be expanded on the first use on a page or that a link to a glossary or list of terms be provided- --> left out for now    h5. Affected guidelines  h6. A   * *On Input:*   *3.2.2* Changing the setting of any user interface component does not automatically cause a change of context unless the user has been advised of the behaviour before using the component   * *Labels or Instructions:*   *3.3.2* Labels or instructions are provided when content requires user input   * *Parsing:*   *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features.    Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete.    h6. AAA   * *Link Purpose (Link Only):*   *2.4.9* A mechanism is available to allow the purpose of each link to be identified from link text alone, except where the purpose of the link would be ambiguous to users in general.   * *Abbreviations:*   *3.1.4* A mechanism for identifying the expanded form or meaning of abbreviations is available.    h5. Affected browsers   * All"""
"MDL-68147","Bug","Administration|Course",1,"Activity names on recommended activity admin page are bold","""They don't need to be bold. Let's match what it looks like on the manage activities page.     """
"MDL-68178","Bug","Authentication",1,"Email-based self-registration confirmation email is not re-sent","""Using E-mail based self-registration.     (Our Moodle-installations are used by medical centres sharing information. Because of the COVID-19 outbreak, users that want to resend the activation link, cannot do that, so that's why I bumped this up to critical).    > User creates account  > User receives confirmation e-mail but DOES NOT activate / click on the link in the e-mail  > User logs in  > User gets dialog to activate account or resend the activation mail  > User presses button to resend the activation e-mail    PROBLEM: second / reconfirmation email is not send.    But when you go to admin/user.php and resend the confirmation from there (as admin), it works.            """
"MDL-68174","Task","Course",5,"Remove existing unified filter from the participants page","""Once the new participants page filter is in place, the existing unified filter can be removed from that page."""
"MDL-68171","New Feature","Course",2,"Add the ability to set the join type between filters in the participants filter","""Introduce the ability to join filter conditions in a filter set by """"All"""", """"Any"""" and """"None"""" join (match) types.    As shown in [this step|https://projects.invisionapp.com/share/NAVHB0RQY2X#/screens/403328876] of the Invision design."""
"MDL-68200","Bug","Accessibility|Forum",1,"Forum: Discussion list: Accessibility issues","""h5. Issues  h6. A   * -The links in the """"Jump to…"""" drop down are triggered when the mouse/finger is clicks/touches the element rather than when it is lifted.- --> could not reproduce on any of the supported browsers   * -Empty form labels. See Fig. 11.03- --> Fixed as part of MDL-67968   * Errors found using W3C Nu Validation Service and filtered to indicate WCAG errors only    h6. AA   * -Text breaks out of its containers when zoomed to 400%. This occurs in IE only. See Fig. 11.04- --> deferred to MDL-68249   * -Colour contrast #3, #28- --> Will be addressed on MDL-64494    h6. AAA   * Month abbreviations such as """"Jun"""", """"Feb"""" are not fully explained. Even well known abbreviations need to either be expanded on the first use on a page or that a link to a glossary or list of terms be provided    h5. Affected guidelines  h6. A   * *Pointer Cancellation:*   *2.5.2* For functionality that can be operated using a single pointer, at least one of the following is true:   No Down-Event   The down-event of the pointer is not used to execute any part of the function;   Abort or Undo   Completion of the function is on the up-event, and a mechanism is available to abort the function before completion or to undo the function after completion;   Up Reversal   The up-event reverses any outcome of the preceding down-event;   Essential   Completing the function on the down-event is essential.   * *Labels or Instructions*   *3.3.2* Labels or instructions are provided when content requires user input   * *Parsing:*   *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features.    Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete.    h6. AA   * *Reflow:*   *1.4.10* Content can be presented without loss of information or functionality, and without requiring scrolling in two dimensions for:   Vertical scrolling content at a width equivalent to 320 CSS pixels;   Horizontal scrolling content at a height equivalent to 256 CSS pixels.   Except for parts of the content which require two-dimensional layout for usage or meaning.   * *Non-text Contrast:*   *1.4.11* The visual presentation of the following have a contrast ratio of at least 3:1 against adjacent color(s):   User Interface Components   Visual information required to identify user interface components and states, except for inactive components or where the appearance of the component is determined by the user agent and not modified by the author;   Graphical Objects   Parts of graphics required to understand the content, except when a particular presentation of graphics is essential to the information being conveyed.    h6. AAA   * *Abbreviations:*   *3.1.4* A mechanism for identifying the expanded form or meaning of abbreviations is available."""
"MDL-68196","Bug","Accessibility|Course",1,"Course participants: Enrol user: Accessibility issues","""h5. Issues  h6. A   * *(IE only issue)* When the select users dropdown menu receives focus, it automatically expands. The user is unable to close the dropdown menu which obscures the rest of the form. See Fig. 10.02   * -label. See Fig. 10.01.- --> Fixed by MDL-67968   * -Errors were found using W3C Nu Validation Service and filtered to indicate WCAG errors only. See Fig. 10.01.- --> addressed at MDL-68148    h6. AA   * -Colour contrast #3, #4.- --> addressed at MDL-64494    h5. Affected guidelines  h6. A   * *On Focus:*   *3.2.1* When any component receives focus, it does not initiate a change of context   * *Labels or Instructions*   *3.3.2* Labels or instructions are provided when content requires user input   * *Parsing:*   *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features.    Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete.    h6. AA   * 1.4.11"""
"MDL-68205","Bug","Accessibility|Forum",0,"Forum: View discussion in grading: Accessibility issues","""h5. Issues  h6. A   * Errors found using W3C Nu Validation Service and filtered to indicate WCAG errors only    h6. AAA   * The pointer target sizes for """"x"""" close button does not have a target area of at least 44 x 44 pixels    h5. Affected guidelines  h6. A   * *Parsing:*  *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features.   Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete.    h6. AAA   * *Target Size:*  *2.5.5* The size of the target for pointer inputs is at least 44 by 44 CSS pixels except when:  *Equivalent*  The target is available through an equivalent link or control on the same page that is at least 44 by 44 CSS pixels;  *Inline*  The target is in a sentence or block of text;  *User Agent Control*  The size of the target is determined by the user agent and is not modified by the author;  *Essential*  A particular presentation of the target is essential to the information being conveyed."""
"MDL-68204","Bug","Accessibility|Forum",2,"Forum: Discussion view (experimental): Accessibility issues","""h5. Issues  h6. A   * -The links in the """"Jump to…"""" drop down are triggered when the mouse/finger is clicks/touches the element rather than when it is lifted.- --> could not reproduce on any of the supported browsers   * See 1.3.1 re: labels   *Info and Relationships:*   *1.3.1* Information, structure, and relationships conveyed through presentation can be programmatically determined or are available in text.     * Error found using W3C Nu Validation Service and filtered to indicate WCAG errors only. See Fig. 12.05    h6. AA   * When zoomed to 200% the content overlaps and the footer takes up most of the page making it very difficult to see the main content. *This issue is only present in IE.* See Fig. 13.01   * Content in the page breaks when zoomed to 400%. *This issue is present in IE only.* See Fig. 13.03    h6. AAA   * The """"Jump to…"""" dropdown and next page and previous page links that would normally be at the bottom of the main content is now stuck in the middle of the screen and crosses over the video iFrame. *This issue is present in IE only.* See Fig. 13.02   * -See 1.4.5. See Fig. 12.01- --> related to content example   * Month abbreviations such as """"Jun"""", """"Feb"""" are not fully explained. Even well known abbreviations need to either be expanded on the first use on a page or that a link to a glossary or list of terms be provided    h5. Affected guidelines  h6. A   * *Pointer Cancellation:*   *2.5.2* For functionality that can be operated using a single pointer, at least one of the following is true:   *No Down-Event*   The down-event of the pointer is not used to execute any part of the function;   *Abort or Undo*   Completion of the function is on the up-event, and a mechanism is available to abort the function before completion or to undo the function after completion;   *Up Reversal*   The up-event reverses any outcome of the preceding down-event;   *Essential*   Completing the function on the down-event is essential.   * *Labels or Instructions*   *3.3.2* Labels or instructions are provided when content requires user input   * *Parsing:*   *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features.    Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete.    h6. AA   * *Resize Text:*   *1.4.4* Except for captions and images of text, text can be resized without assistive technology up to 200 percent without loss of content or functionality.   * *Reflow:*   *1.4.10* Content can be presented without loss of information or functionality, and without requiring scrolling in two dimensions for:   Vertical scrolling content at a width equivalent to 320 CSS pixels;   Horizontal scrolling content at a height equivalent to 256 CSS pixels.   Except for parts of the content which require two-dimensional layout for usage or meaning.    h6. AAA   * *Visual Presentation:*   *1.4.8* For the visual presentation of blocks of text, a mechanism is available to achieve the following:   ## Foreground and background colors can be selected by the user.   ## Width is no more than 80 characters or glyphs (40 if CJK).   ## Text is not justified (aligned to both the left and the right margins).   ## Line spacing (leading) is at least space-and-a-half within paragraphs, and paragraph spacing is at least 1.5 times larger than the line spacing.   ## Text can be resized without assistive technology up to 200 percent in a way that does not require the user to scroll horizontally to read a line of text on a full-screen window.     * *Images of Text (No Exception):*   *1.4.9* Images of text are only used for pure decoration or where a particular presentation of text is essential to the information being conveyed.    Note: Logotypes (text that is part of a logo or brand name) are considered essential.   * *Abbreviations:*   *3.1.4* A mechanism for identifying the expanded form or meaning of abbreviations is available."""
"MDL-68202","Bug","Accessibility|Forum",1,"Forum: Discussion view (current): Accessibility issues","""h5. Issues  h6. A   * -The links in the """"Jump to…"""" drop down are triggered when the mouse/finger is clicks/touches the element rather than when it is lifted.- --> could not reproduce on any of the supported browsers   * labels   (*Info and Relationships:*   *1.3.1* Information, structure, and relationships conveyed through presentation can be programmatically determined or are available in text.)   * Error found using W3C Nu Validation Service and filtered to indicate WCAG errors only. See Fig. 12.05    h6. AA   * -Text breaks out of its containers when zoomed to 400%. *This occurs in IE only*- --> deferred to MDL-68249   * -Colour contrast #3- --> Will be addressed on MDL-64494    h6. AAA   * The links named """"edit"""", """"delete"""" and """"reply"""" are repeated but each one goes to a different location.    h5. Affected guidelines  h6. A   * *Pointer Cancellation:*   *2.5.2* For functionality that can be operated using a single pointer, at least one of the following is true:   *No Down-Event*   The down-event of the pointer is not used to execute any part of the function;   *Abort or Undo*   Completion of the function is on the up-event, and a mechanism is available to abort the function before completion or to undo the function after completion;   *Up Reversal*   The up-event reverses any outcome of the preceding down-event;   *Essential*   Completing the function on the down-event is essential.   * *Labels or Instructions*   *3.3.2* Labels or instructions are provided when content requires user input   * *Parsing:*   *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features.    Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete.    h6. AA   * *Reflow:*   *1.4.10* Content can be presented without loss of information or functionality, and without requiring scrolling in two dimensions for:   Vertical scrolling content at a width equivalent to 320 CSS pixels;   Horizontal scrolling content at a height equivalent to 256 CSS pixels.   Except for parts of the content which require two-dimensional layout for usage or meaning.   * *Non-text Contrast:*   *1.4.11* The visual presentation of the following have a contrast ratio of at least 3:1 against adjacent color(s):   *User Interface Components*   Visual information required to identify user interface components and states, except for inactive components or where the appearance of the component is determined by the user agent and not modified by the author;   *Graphical Objects*   Parts of graphics required to understand the content, except when a particular presentation of graphics is essential to the information being conveyed.    h6. AAA   * *Link Purpose (Link Only):*   *2.4.9* A mechanism is available to allow the purpose of each link to be identified from link text alone, except where the purpose of the link would be ambiguous to users in general.    h5. Affected browsers   * All"""
"MDL-68231","Bug","Course",1,"Dropping sections does not complete","""When you drop a section in the Weeks or Topics course format the wait selector stays on    The following JS errors appear:        It appears to be caused because the non-ajax activity chooser is no longer always present on the page.    The script is looking for an element with the *section_add_menus* class inside the sections."""
"MDL-68235","Bug","Other",1,"Incorrect section used in activity creation after section drag and drop","""We now pull this from the data attribute in the link, but this isn't updated when we move a section. We used to use the value of X in id=""""section-X"""" on the section wrapper, which was being updated on drop as part of the course format drag and drop code.    To see the problem:  1. Pull in fix from MDL-68231 first. This fixes the section drag and drop  2. Create 4 sections in a course - topics format is fine.  3. Drag section 4 onto section 3  4. Now, using section 3 add an activity    Expected: the activity is created in section 3  Actual: It's created in section 4."""
"MDL-68246","New Feature","Course",1,"Update fetching of participants to support multiple values per filter","""Currently, fetching of participants (ie user/lib.php:function user_get_participants, user_get_total_participants and related calls) only support submitting a single value per filter type.    These need to be updated to support filtering by multiple values per filter type.    For this issue, this will be restricted to the """"Any"""" (logical OR) case."""
"MDL-68244","Bug","Authentication",1,"Email authentication unit test assumes no profile fields are created","""The authentication email plugin has a unit test for the external library that makes the assumption that there will never be any additional profile fields.    Third party plugins could be using the profile fields for one reason or another and so this test shouldn't fail due to that miscalculation.     This was found when creating the tool_moodlenet plugin which requires creating a user profile field as a temporary solution to backporting the moodlenet plugin."""
"MDL-68269","Bug","Accessibility|Forms Library",1,"Recent changes have caused some form elements to display incorrectly","""This is a regression apparently introduced by MDL-67968    Some change into form structure/classes (fieldsets) have caused certain elements to start displaying incorrectly.    See for example https://github.com/h5p/h5p-moodle-plugin/issues/329 where the problem has been detected.    At the time of writing this it not clear which other stuff may be broken in a similar way.    Quoting [~tusefomal]:    {quote}  I see that this element fieldset goes from flex to a regular display with this change, adding a """"w-100"""" class will increase it's compatibility with previous forms  {quote}    Ciao :-)"""
"MDL-68263","Bug","Course",3,"Activity chooser error when plugins are not fully uninstalled","""To replicate    # login as admin  # install a plugin of type module from the moodle plugins directory  # run the plugin installer  # manually remove the plugin from the /mod folder  # navigate anywhere, Moodle will mention the missing plugin  # only execute the """"update database now""""  # navigate to any course  # turn editing on and try adding an activity      Backtrace :      """
"MDL-68286","New Feature","Course",2,"Update table_sql to support dynamic initials bar","""Update table_sql to support dynamic initials bar"""
"MDL-68283","Bug","Other",1,"get_moodlenet_user_profile should handle validation exceptions","""The user can enter in their moodlenet profile information from the user edit page which doesn't run through the same validation as the moodlenet redirect page.    In situations where the profile information is wrong when this method is called it will throw an exception. We should catch that exception and return null. That would ask the user to enter in a moodlenet profile and the proper validation can happen here.    Things to do:   # In get_moodlenet_user_profile method catch the exception and return null.   # Change the current exception thrown to a moodle_exception.   # Update the unit tests to test for an invalid username already stored.   # Both Master and stable plugin to be updated."""
"MDL-68312","Bug","Gradebook",5,"Gradebook: Grader report: Accessibility issues","""h5. Issues  h6. A   * Errors found using W3C Nu Validation Service and filtered to indicate WCAG errors only    h6. AAA   * -The letter links for the """"First Name"""" and """"Surname"""" searches do not make sense out of context- --> left out for now    h5. Affected guidelines  h6. A   * *Parsing:*   *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features.    Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete.    h6. AAA   * *Link Purpose (Link Only):*   *2.4.9* A mechanism is available to allow the purpose of each link to be identified from link text alone, except where the purpose of the link would be ambiguous to users in general."""
"MDL-68320","New Feature","Administration",5,"Add a campaign feature, with a link to a Moodle page, to support sustainability","""To support the sustainability of the Moodle project add links to the Moodle donation page.    URL: moodle.com/donations    Workflow:   * A message is to be displayed on the admin notification page upon successful install and upgrade of the site.   * Need the ability to disable this through a config setting.    Image + text to be provided."""
"MDL-68330","Bug","Course|Media",1,"Video and audio is not properly rendered by videojs in the course page ","""This issue was discovered while working on the upgrade of VideoJs to the latest version (https://tracker.moodle.org/browse/MDL-67383)    When adding a video link to a content of a label or in a description of an activity (enable to be displayed in the course page), with the media filters enabled, the video is not properly rendered.    Replication steps:   # Login as Admin.   # Create a Course.   # Enable 'Multimedia plugins' filter (Site administration > Plugins > Filters > Manage filters)   # Enable the VideoJS media player and prioritise it over the other media players (Site administration > Plugins > Media players > Manage media players)   # Go to the Course   # Add a Label in the course   ** For 'Label text' add a link to a video file (for ex. mp4)    *Expected*: The video link is displayed properly in a media player in the course page.    *Actual:* The media player with the video link is not properly displayed (See attached screenshot).    Alternatively, you can just upload the provided course backup in order to replicate the issue. """
"MDL-68343","Bug","Gradebook",1,"Gradebook: Single view: Accessibility issues","""h5. Issues  h6. A   * See 1.3.1 re: labels:  *Info and Relationships:*  *1.3.1* Information, structure, and relationships conveyed through presentation can be programmatically determined or are available in text.   See Fig. 17.01 and Fig. 17.02   * Error found using W3C Nu Validation Service and filtered to indicate WCAG errors only. See Fig. 12.05    h5. Affected guidelines  h6. A   * *Labels or Instructions*  *3.3.2* Labels or instructions are provided when content requires user input   * *Parsing:*  *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features.   Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete."""
"MDL-68362","New Feature","Other",3,"Import API: create the file_processor contract","""Create a file_processor interface in course\classes\local\import (namespace TBD)    This should have:   * a 'process' method which takes a file container object (as defined in MDL-68360). This is a contract for file processors  and must be implemented by plugins intending to process files."""
"MDL-68361","New Feature","Other",3,"Import API: create the file_extension_register contract","""Create the file_extension_register interface. This should have:   * A method register_extensions which returns all extensions supported by the implementing class, and their lang string descriptors. E.g. [‘png’ =>  ‘what is going to happen when this module processes the png’]. This could be an array or a formal object - time permitting.   ** Note: objects in plugins only implement this contract when they want to support at least one file extension, however, we need to provide a way that this method can return ‘all known extensions’. Whether that be via a special extension ‘*’ or some other return is up for discussion."""
"MDL-68359","New Feature","Other",5,"Revise: Create custom banner item for moodlenet","""Create a custom banner class for moodlenet to handle advanced options such as what to do on close, and cancel.      * On cancel the user should stay on the current page.   * A call to the resource manager needs to be made to clear the session data.   * There should be no close button.|"""
"MDL-68355","Bug","Accessibility|Forum|Grading methods",1,"Fix accessibility issues for the marking guide grading form in the forum grading UI","""Axe reports 2 accessibility issues for the marking guide grading form in the forum grading UI.  # Empty button description for the criterion description. e.g.    # Empty button description for the frequently-used comments picker button. e.g.  """
"MDL-68353","Bug","Accessibility|Course",1,"Course management: Create new course: Accessibility issues","""h5. Issues  h6. A   * A button is empty or has no value text. See Fig. 20.01   * See 1.3.1 re: labels (See Fig. 20.02 and Fig. 20.03 and Fig. 20.04):  *Info and Relationships:*  *1.3.1* Information, structure, and relationships conveyed through presentation can be programmatically determined or are available in text.    * Errors found using W3C Nu Validation Service and filtered to indicate WCAG errors only    h5. Affected guidelines  h6. A   * *Text Alternatives:*   *1.1.1* All non-text content that is presented to the user has a text alternative that serves the equivalent purpose, except for the situations listed below.   * *Labels or Instructions*   *3.3.2* Labels or instructions are provided when content requires user input   * *Parsing:*   *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features.    Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete."""
"MDL-68390","New Feature","Accessibility",0,"WCAG 4.1.2: aria-hidden elements contain focusable elements","""WCAG: 4.1.2  User impact: Serious  {quote}  Using the aria-hidden=""""true"""" attribute on an element hides the element and all its children from screen readers and other assistive technologies. If the hidden element contains a focusable element, assistive technologies won't read the focusable element, but keyboard users will still be able to navigate to it, which can cause confusion.  {quote}  References:  https://web.dev/aria-hidden-focus/  https://dequeuniversity.com/rules/axe/3.5/aria-hidden-focus?application=AxeChrome    Affects:  * all modals created from core/modal AMD module"""
"MDL-68418","Improvement","Course",3,"Remove suggestions list for Keyword autocomplete","""When showing the Keyword filter, where we have no suggestions available to show, we shoudl not show the suggestions list."""
"MDL-68416","Improvement","Course",1,"Limit ""Add condition"" button","""Limit the number of times that the """"Add condition"""" can be pressed to the total number of available conditions."""
"MDL-68427","Improvement","General",1,"paging_bar previous/next buttons have wrong page numbers","""We are doing some incorrect math to work out the previous and next page numbers in {{paging_bar}}"""
"MDL-68444","Bug","Calendar",0,"Calendar accessibility followups","""Need to fix some accessibility issues for the calendar based on feedback from Webkey IT.  h5. AA  # Linked days of the month   #* """"{{aria-labelledby}}"""" would seem to be more effective    h5. AAA   # Abbreviations of the days of the week  #* """"{{aria-labelledby}}"""" would also seem to be more effective  #* A visual representation of the abbreviations might be also better here. """
"MDL-68442","Improvement","Course",1,"Enrolment actions no longer work after dynamic table actions","""The current participant table code for Viewing, Editing, and Removing enrolments binds to specific instances of buttons. When we reload the table those event handlers are dropped.    We need to update the code to make it safe to work with the dynamic table code."""
"MDL-68463","Improvement","Course",2,"""Show all [count]"" link not updated on search","""When a query is applied we do not update the """"Show all [count]"""" link.    We should _not_ update the """"Number of participants"""" count because this is worded as being the total number of participants in the course.    BUT we may which to change it to something more useful, like:        That is, to show the total number of people in the course (3000) and the number that are shown in the filter (120)."""
"MDL-68510","Improvement","General",1,"Update MoodleNet integration language strings","""The below google doc shows the updated strings:    [https://docs.google.com/document/d/1gZryigcaQAwoc9mp9hulDoY_zCXrnsSiSUfx_60hK6Q/edit?usp=sharing]    Prototypes will also be updated to match.    [~barbararamiro] can you link those here when done?"""
"MDL-68507","New Feature","Other",1,"Provide site details when redirecting to moodlenet (tool_moodlenet 3.7 and 3.8","""Please ensure when redirecting to moodlenet to provide details about our site and path.    Taken from chat with Jake:  {quote}OFFICIALSITECONFIGVALUE?site=URLENCODEDSITE&path=URLENCODEDPATH  {quote}  It's likely that both the mod_moodlenet plugin as well as the master implementation will have to be checked and updated.    Jake:   Here's the commit running on the prototype site for 3.8 right now ([https://github.com/moodle/moodle/commit/ccd0304161a3d8e9520e6167b97074084e991c9f]). We'll need to clean this up and add support for the case when a user enters their MoodleNet profile URL into the page (this commit only handles the """"Browse official"""" button), but it gives you the idea.    The main things we need:     *1*. tool_moodlenet: Fix tool_moodlenet_add_resource_redirect_url() so that when it's returning the 'instance.php' url, it also includes course and section params so these can be used in creation of the 'path' param that we'll provide to MoodleNet. Given the path param creation needs to happen on the instance page, the instance page needs to know the course and section.   *2.* tool_moodlenet: Make sure that when sending the user to MoodleNet, we send them to the following URL:    MOODLENETSITE?site=URLENCODEDSITE&path=URLENCODEDPATH    Where:   MOODLENETSITE is the URL of the users MoodleNet site, including the path to the (as yet to be determined) endpoint. e.g. [https://their.moodlenet.site|https://their.moodlenet.site/]   URLENCODEDSITE is the Moodle site ($CFG->wwwroot), urlencoded. E.g. urlencode(""""https//example.moodle.site"""");   URLENCODEDPATH is the path to the tool's import script, *including any params such as course and section*, also urlencoded. E.g. urlencode(""""/admin/tool/moodlenet/import.php?course=x&section=y"""");    *Note:* I would not recommend exploiting the renderable+template context as a way to get data into the rendered like I've done here. This was just a quick patch to test end to end comms with the test client."""
"MDL-68529","Bug","Course|Performance",3,"Activity chooser has to fetch data before showing","""When you initially click to open the activity chooser nothing happens at first. The page must wait to perform an initial fetch of the module data before it even indicates that anything is happening.    It should instead show the dialogue immediately, as soon as the button is clicked, but show that it is loading.    One a slow connection this can take over half a second at the moment."""
"MDL-68606","Bug","Other",1,"Moodlenet profile validation should return a promise (and object).","""The validation of a user's moodlenet profile encounters an error if the basic checks fail. This is due to the expectation that the return is a promise.    admin/tool/moodlenet/amd/src/validator.js line 37 should be update to return a promise of an object:        # Please update the docblock accordingly.   # Must be changed on the 3.7 / 3.8 plugin as well."""
"MDL-68621","Bug","Other",5,"Update moodlenet settings in the plugin and remove from core.","""Due to changes that we have made to the project, it is unnecessary to have the setting remain in core.    So we need to:   # Remove the setting from core.   # Remove the upgrade code in the plugin to transfer the setting into core.   # Move the setting from Advanced features to a heading of its own """"Site administration > MoodleNet > MoodleNet settings""""   # -Change the current setting of a check box of on or off to:-   ** -Enabled with footer.-   ** -Disabled with footer.-   ** -Completely disabled.-   # Add a setting for the default url to go to (default MoodleNet instance URL (home.moodle.net), could be a personal instance of moodlenet)   # Add a setting for the name of the default MoodleNet instance (default MoodleNet). This name will be the label of the button to go to the above url.   # Code related to MoodleNet should all exist in the plugin.   ## -Current fallback templates should be moved into the plugin.-   ## The activity chooser should either display a footer or not. -Fallbacks related to settings should be handled in the MoodleNet plugin.-   ## No need for a fallback footer. Just keep the original footer.    Updated prototype for the Activity chooser MoodleNet screen:    [https://projects.invisionapp.com/share/JBVVF3UM5PS#/screens/403904371]"""
"MDL-68662","Improvement","Course",3,"Introduce an Activities and Resources tab","""Based on review feedback we want to make the following changes because we do want to be able to display activities and resources in their own individual tabs:   # Add a separate tab for just Activities and one for just Resources   # Tabs are to be ordered like this: Starred, All, Activities, Resources, Recommended   # Default tab to be open when the activity chooser opens: All   ## If there are starred items then this tab should be show first.   ## Otherwise the All tab should be show first.   ### The recommended tab is now *not* part of the default focus workflow.   # Tab styling needs to be improved when they are stacked (e.g. you get 2 rows in a narrow screen) to make it clearer which tab you are on"""
"MDL-68661","Improvement","Course",1,"Update language strings in the activity chooser","""Based on review feedback we want to make the following changes because we do want to be able to talk about Activities and Resources (and in a separate issue introduce separate tabs for these):   # Rename the 'Add an activity' link on the course page to 'Add an activity or resource'   # Rename the Activity chooser title from ‘Add an activity’ to ‘Add an activity or resource’   # Rename the 'Activities' tab to 'All'     """
"MDL-68683","Bug","Competencies",0,"Competency cleanup upgrade step causes DML exception when loading user context","""MDL-60126 added an upgrade step:        {{context_user::instance}} requires that the user not be flagged as deleted in the DB and thus the upgrade fails.  """
"MDL-68679","New Feature","Other",1,"Mod MoodleNet plugin branches (37 and 38 only)","""Holds the feature branch for the 37 and 38 mod_moodlenet plugin. This plugin's purpose is to extend the activity chooser with a MoodleNet item for 3.7 and 3.8, since the 3.9 activity chooser changes are not present in these branches."""
"MDL-68705","Improvement","Automated functional tests (behat)|Unit tests",1,"Consider making composer self-update non blocking or optional","""Right now, every behat or phpunit {{init.php}} executions does check if {{composer.phar}} is available @ dirroot.    A) If it's not available, it's downloaded.  B) if it's available, a {{self-update}} is executed.    Any error, kills the {{init.php}} execution, exiting with error.    That's ok 90% of times, but there are some cases where it can lead to unnecessary problems/processing:    1) Developer working offline. Impossible to run tests.  2) Problems @ {{getcomposer.org}}, irrespectively of already being updated.  3) {{composer.phar}} maintained by any other method.    In all those cases... it may be interesting to allow the {{self-update}} to be (one of):    a) make its execution optional (adding a {{--no-composer-update}} switch.  b) avoid problems to exit with error (adding a {{--no-error-on-composer-update}} switch.    Note that this doesn't affect A) (download the phar if missing), only updates.    So this issue is about to decide if it's worth adding some of those options, decide which one and implement it. Both for phpunit and behat {{init.php}} scripts. Then we may start adding them here and there.    Ciao :-)  """
"MDL-68698","New Feature","Other",5,"Allow links to be imported by tool_moodlenet (all versions)","""We currently have a workflow for file import only. We want to support links too.    As a teacher    I want to be able to send links I've shared on MoodleNet to Moodle and have them be imported into an activity instance   So that I don't need to manually create resources in Moodle using the URL    *Acceptance criteria:*   1. [MoodleNet side]: A teacher is able to use the 'send to Moodle' button in MoodleNet to initiate an import for a link.    2. Once initiated, the workflow should present the same steps as the file import process (confirm, course select, format select)   3. Relevant strings should be updated to reflect the name of the item being imported during the various stages   4. The teacher is able to select from a range of supported link handlers at the 'format select' stage.    5. Once selected, the resource should be created and should have a 'name' and 'description' value matching those provided by MoodleNet.   6. mod_url must always be available to handle link import in core, and other modules should also be able to register interest in handling links (core already supports this - we just want to confirm it works nicely)    *Spec:*   1. MoodleNet will provide a 'type' field in the POST data being sent to admin/tool/moodlenet/import.php, letting Moodle know whether a resource is to be treated as a file or as a link. Supported values are 'link' and 'file' right now only.   2. MoodleNet will send JSON data in the 'resource_info' field in the aforementioned POST, containing 'name' and 'summary' fields, among others. These are to be used for the 'name' and 'description' values in Moodle. Sample below:  """
"MDL-68739","Bug","Backup",1,"Course not backed up with CLI script","""As reported by [~Anna Sadia] in MDLQA-14676:    Steps to reproduce:    # Log in as an administrator.  # Create a test course,'course1'.  # Go to Site administration > Courses > Backups > Automated backup setup.  # Ensure under Automated backup setup, _Active_ (backup_auto_active) is set to _Enabled_.  # Ensure under Automated backup setup, _Skip courses not modified since previous backup_ (backup_auto_skip_modif_prev) is checked (enabled).  # In your site's wwwroot, run: php admin/cli/automated_backups.php    Expected result: The backup runs to completion, and includes the following in the output: """"Backing up coursexx..."""".    Actual result: """"Backing up coursexx"""" is not reflected in the output."""
"MDL-68758","Task","Repositories",1," The 'Download selected files' button should only display in the 'Display folder with file details' view","""As found when testing MDLQA-14380:    Steps to reproduce:   # Log in as a user and add a few files and folders to your private files area.   # Save changes.   # Check the different views, 'Display folder with file icons', 'Display folder with file details' and 'Display folder as file tree' and make a note of which views the 'Download selected files' button is displayed in, and which views have select boxes.    Expected result: The 'Download selected files' button only displays in the 'Display folder with file details' view, where there are select boxes (as for the Delete button).    Actual result: The 'Download selected files' button is displayed in all views, which is confusing because there are no select boxes in two of the views."""
"MDL-68807","Bug","Other",1,"Moodle assumes course and section are omitted when starting in MoodleNet, but these can be sent empty too [master and 37/38].","""Identified on the prototype site, this comes down to the handling and validation of the course and section params in import.php. The fix should be small, but we should probably consider validating these properly (clean_param) - that seems to have been overlooked in my work on MDL-68698.    To replicate this one:   1. Take the new test client (see link in testing instructions) and start an import of the first item there - the cat.png without course and section   2. Notice that you'll see an SQL error, complaining about courseid being empty."""
"MDL-68804","Bug","Other",1,"Not redirecting to the MoodleNet endpoint","""When a user enters their MoodleNet profile URL into either:   a) the activity chooser pane (master) or   b) The instance select page (38)    The process should be to validate the profile and then redirect the user to the MoodleNet endpoint, where the MoodleNet instance will capture the site, course and section (this is a late change, adding course and section like this). Somehow, we've missed setting the endpoint in our redirects and we're not currently able to hand the user off properly.    The endpoint is:   lms/moodle/search    Making a request url look like   your.moodlenet.site/lms/moodle/search?site=xxx&course=yyy&section=z    What I'm seeing in the current branches (based on prototype site testing) is as follows:   Master (this is probably closer to correct):   I see a request to [https://home.next.moodle.net|https://home.next.moodle.net/] with site and path params correctly urlencoded and set. Here were only missing the endpoint path. We need to drop the path param as we no longer need to send this and add course and section params.    38 (this seems quite off the mark):    I see a request for the user's profile on MoodleNet, no params sent at all.    So, we need to fix this in both branches by the looks of it."""
"MDL-68928","Improvement","Course|Other",5,"Add a way to decide what plugin will show in the activity chooser footer","""As mentioned by Jun during his review of MDL-67883 we add a way to allow site admins to decide what will be displayed in the activity chooser footer with the default set to MoodleNet.    This will help in the case another plugin implements the required callback and wins the race against MoodleNet.    See below for context:  h5. \core_course_external::get_activity_chooser_footer()   # I'm not sure whether we should be limiting the execution of other plugins implementing the """"{{_custom_chooser_footer}}"""" hook. If another plugin implements this function, but we still want to display the link to MoodleNet, if the call to """"{{\get_plugins_with_function()}}"""" runs the other plugin's implementation first, then the MoodleNet link won't be shown anymore. Perhaps we should remove the breaks in the loop and either do the following:   ** Allow the activity chooser footer to be able to display multiple activity_chooser_footer items from plugins.   ** Add an admin setting that allows the admin to select which `activity_chooser_footer` item should be displayed in the activity chooser footer. This would provide reliability on the item will be displayed in the activity chooser footer as opposed to the first-processed, first-displayed nature of the current implementation.   Let me know your thoughts. In any case, this can be done as a separate issue/follow up."""
"MDL-69068","Bug","Automated functional tests (behat)",0,"Allow behat generators to be pivoted","""At the  moment if I want to use a behat data generator to create something it _must_ look like:      I'd like to propose that we support a singular form so that we can support:  """
"MDL-69079","Bug","Course",1,"Activity chooser does not display if site contains plugins missing from disk","""In one of our Moodle 3.9 testing sites, we've found the new improved activity picker does not load in the following circumstances:   * a plugin has been deleted from the server, but uninstall hasn't taken place ==> this makes the plugin '*missing from disk*'.    Up until Moodle 3.8, it was possible to keep plugin configuration data in the database, while not having the files of the plugin on the server. This didn't block properly showing the activity picker.    We sometimes do this, to prevent losing the configuration data while the plugin is undergoing maintenance.     When you'd completely process the uninstall for an activity mod plugin, you lose all configuration and have to completely reinstall it once maintenance is finished.     Activity chooser does not display if site contains plugins missing from disk.     """
"MDL-69110","Bug","Libraries",2,"Sorting does not work anymore in non-dynamic tables","""The classical method of sorting the various quiz attempts by clicking on the column link does not work well anymore. The first time you click on the link, attempts are sorted in descending order by the column selected, but subsequent clicks always do the same.    The expected behaviour is to invert the sort order with each click.    Also, the little black arrows indicating the present sort order are not shown anymore.    To reproduce:    Try to view the attempt list of some quiz with attempts. The page is <base URL>mod/quiz/report.php?id=1569&mode=overview  (the quiz ID will be different in your case, obviously)"""
"MDL-69116","Bug","Accessibility|Quiz",0,"No label for clear my choice option on multiple-choice questions (Take 2)","""The initial issue (MDL-67901) that attempted to fix this didn't quite work out, so we're trying again on this issue...    h5. Issue   * No label for clear my choice   * 2 errors were found using W3C Nu Validation Service and filtered to indicate WCAG errors only. See screenshot-2.    h5. Affected guidelines:  h6. A   * *Info and Relationships:*   *1.3.1* Information, structure, and relationships conveyed through presentation can be programmatically determined or are available in text.   * *Labels or instructions:*   *3.3.2* Labels or instructions are provided when content requires user input   * *Parsing:*   *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features.   Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete.    h5. Affected browsers:   * All"""
"MDL-69115","Bug","Accessibility|Course",0,"Course and category management page accessibility followups","""Some pending accessibility issues found in the course management page:   # Missing label for the """"{{Search courses}}"""" text box.   # -The """"up"""" and """"down"""" arrow links do not make sense in or out of context- This will be fixed in MDL-68291   # -Duplicate IDs when running the Nu HTML validator on the course management page-. This will be fixed in  MDL-69262    # The highlight for the selected category does not have sufficient contrast."""
"MDL-69114","Bug","Accessibility|Themes",0,"Insufficient colour contrast for .*-info classes","""Info classes like """"{{.text-info}}"""" currently use the colour [""""{{$cyan}}""""|https://github.com/moodle/moodle/blob/master/theme/classic/scss/preset/default.scss#L23] which has a colour contrast ratio against a white background of 2.09:1. This does not meet the Level AA requirement for colour contrast. Perhaps we should make this a little bit darker to achieve better contrast. """
"MDL-69138","Improvement","Automated functional tests (behat)",0,"Behat visit should be passed through $this->execute","""There's a number of cases where we call {{$this->getSession()->visit($url)}} or similar and the we call steps immediately aftewards.    In some steps we then immediately try to interact with the page - for example by pressing a button. This can cause random fails if the page has not yet finished loading.    We have two options:  # add a call to {{$this->wait_for_pending_js()}}; or  # create a new {{i_visit}} step which call via {{$this->execute()}}.    My preference is for the new step, but then there are two further options:  # only update those cases affected; or  # update all, even those where it isn't necessary.    Technically speaking we only need the {{$this->execute()}} where something is followed by another interaction before the end of the step, but it may be better to call the step consistently always."""
"MDL-69160","Improvement","Automated functional tests (behat)|Workshop",0,"mod_workshop behat submission allocation uses unchained step leading to random fails","""mod/workshop/allocation/manual/tests/behat/behat_workshopallocation_manual.php"""
"MDL-69241","Bug","Enrolments",0,"Participants page pagination doesn't reset when applying filters","""Spotted this during the moot. To replicate:   # In a course with a high number of users (say, 5 pages of them), go to the participants page   # Assign a new role (anything you like, so long as no one has it yet), to a handful of users (say 5)   # Now, from the main, unfiltered list of participants, go to page 3 or 4 using the pagination controls.   # Now, filter """"All Roles <Your role>"""" and filter results   # *Expected:* I see the 5 users  *Actual:* Notice that you'll see """"5 participants found"""" but where the table normally is there is """"Nothing to display"""" printed.    See example from the moot site:   !example_broken.jpg|thumbnail!        We probably want to reset pagination when filtering, I suspect."""
"MDL-69238","Improvement","Libraries",1,"Final removal of lib/coursecatlib.php","""The file throws debugging saying 'Do not include coursecatlib.php' and isn't used anywhere. This was done in 3.6, so we can probably remove this file completely now."""
"MDL-69262","Bug","HTML and CSS",0,"Duplicate element IDs caused by action menu items","""To reproduce:  # Log in as admin  # Go to the course management page.  # View and copy the page source  # Validate the HTML using the Nu HTML validator.  # Expected: There should be no duplicate IDs.  # Actual: Duplicate ID errors exist which are linked to the action menu items."""
"MDL-69278","Bug","Automated functional tests (behat)",1,"BeforeScenario hook failure leads to skipped test and rerun","""When Selenium does fail in the BeforeScenario step it means that the exit code is non-zero, causing a re-run, but it also causes the Scenario to be _skipped_ rather than to fail.    If no other scenario step fails then the rerun.txt is empty.    Because the Suite returned non-zero, the Suite is rerun, but the lack of a rerun.txt means that the entire Suite reruns ad not just the failed test.    You can see that in the following job:    https://ci.moodle.org/job/S37.06.01%20-%20Behat%20-%20Chrome%20+%20Postgres%20+%20Classic/157/console    This happens because an Exception in a BeforeScenario hook leads to the Skip rather than Fail.    To resolve it we can apply the same approach as taken in the BeforeStep setup where a BeforeStep failure stores the exception in a statically defined var, and then the """"I look for exceptions"""" step finds it and fails the test.  This _may_ require an additional change to the behat extension to look for stored exceptions _before_ the step runs."""
"MDL-69297","Bug","Assignment",1,"File-based Assignments shouldn't accept submissions without any files","""h1. Steps to reproduce  h2. As a teacher:   # Create new assignment with:   # Submission types = File submissions   # Require students to click the submit button = Yes    h2. As a student:   # On the assignment, Edit submission:   # Upload a file and save changes   # Open the Assignment page (with the Submit assignment button) _in two browser tabs_   # In one of the tabs, click and confirm the """"Remove submission"""" button (the submission now has no files)   # In the other tab, click Submit assignment and confirm.    h1. Expected results    Moodle rejects the submission, due to checking and finding that it had no files.  h1. Actual results    Moodle accepts the submission.  h1. Notes    Obviously this is a slightly pathological case, as it must take some malevolence or considerable confusion for a student to take those steps and create an empty submission - but I've had a student that appears to have managed just that!"""
"MDL-69327","Task","External Tool (IMS-LTI)",1,"Learn about remote configuration challenges by creating a simple, remote setup proof of concept using LTI 1.1: Service considerations","""*{color:#ff0000}This issue deals with the service considerations problem only. Only those points marked in red.{color}*    We want to discover as must as we can about what's involved in programmatically setting up an activity, in a course, as an LTI provider, so that a consuming site may use this.    The way this normally works when Moodle is acting as a provider (assuming human setup) is as follows:   # Admin enables LTI enrolment method   # Teacher creates an activity   # Teacher creates an LTI enrol enrolment instance, selecting the activity (there are several options when doing this, via the enrolment instance form)    Programmatically creating this raises an array of questions, but we'd like to attempt to do this in order to learn more about what might/might not be problematic.    At the end of this task, we should be able to make a web request to create an instance of an activity and make that activity available via LTI enrolment, as a provider. We want to document all limitations, assumptions, etc that we face along the way. This will be critical in identifying viability of LTI for such a task.    These are just some of the things we'll want to experiment with and document the answers to. There will surely be other facts learned along the way too, which should also be documented clearly.   # {color:#172b4d}How can we create an activity without knowing which fields are required by the activity (i.e. what fields would be mandatory if manually creating the instance)?{color}   # {color:#172b4d}Is there the possibility of creating the instance with defaults for these required fields? If so, how?{color}   # {color:#172b4d}Are we going to be able to support configuration of any of the enrolment method specific settings? These are things which normally be set up on the enrolment method, by the teacher setting up the method. Can we use sensible defaults here? If so, what does that mean for clients consuming the provided activity?{color}   # {color:#172b4d}What does the client absolutely need to consume the provided tool? Secret, key, etc?{color}   # *{color:#de350b}How are we going to pass the required information back to the client, assuming creation of the provided activity was successful?{color}*   # *{color:#de350b}What access/permissions problems can we foresee? E.g. if a teacher in """"Consumer Site"""" wants to create a provider activity in """"Provider Site"""", how are they authenticating? Will they have an account in the provider site? Do they need any new capabilities to remotely create activities as providers like this?{color}*"""
"MDL-69326","Task","External Tool (IMS-LTI)",1,"Learn about remote configuration challenges by creating a simple, remote setup proof of concept using LTI 1.1: Enrolment method creation","""*{color:#ff0000}This issue deals with the enrolment method creation problem only. Only those points marked in red.{color}*    We want to discover as must as we can about what's involved in programmatically setting up an activity, in a course, as an LTI provider, so that a consuming site may use this.    The way this normally works when Moodle is acting as a provider (assuming human setup) is as follows:   # Admin enables LTI enrolment method   # Teacher creates an activity   # Teacher creates an LTI enrol enrolment instance, selecting the activity (there are several options when doing this, via the enrolment instance form)    Programmatically creating this raises an array of questions, but we'd like to attempt to do this in order to learn more about what might/might not be problematic.    At the end of this task, we should be able to make a web request to create an instance of an activity and make that activity available via LTI enrolment, as a provider. We want to document all limitations, assumptions, etc that we face along the way. This will be critical in identifying viability of LTI for such a task.    These are just some of the things we'll want to experiment with and document the answers to. There will surely be other facts learned along the way too, which should also be documented clearly.   # {color:#172b4d}How can we create an activity without knowing which fields are required by the activity (i.e. what fields would be mandatory if manually creating the instance)?{color}   # {color:#172b4d}Is there the possibility of creating the instance with defaults for these required fields? If so, how?{color}   # *{color:#de350b}Are we going to be able to support configuration of any of the enrolment method specific settings? These are things which normally be set up on the enrolment method, by the teacher setting up the method. Can we use sensible defaults here? If so, what does that mean for clients consuming the provided activity?{color}*   # *{color:#de350b}What does the client absolutely need to consume the provided tool? Secret, key, etc?{color}*   # How are we going to pass the required information back to the client, assuming creation of the provided activity was successful?   # What access/permissions problems can we foresee? E.g. if a teacher in """"Consumer Site"""" wants to create a provider activity in """"Provider Site"""", how are they authenticating? Will they have an account in the provider site? Do they need any new capabilities to remotely create activities as providers like this?"""
"MDL-69325","Task","External Tool (IMS-LTI)",1,"Learn about client configuration challenges by creating a simple activity creation proof of concept in LTI 1.1","""The goal here is to learn what might be required on the client (consumer) side in order to trigger the provisioning and consumption of a remotely provided activity. This issue focuses on the client/consumer side of the consumer/provider relationship, whereas MDL-69324 deals with the server/provider side.    At the end of this task, we should be able to crudely create and consume a remote activity via a consumer-designated site. We want to document all limitations, assumptions, etc that we face along the way. This will be critical in identifying viability of LTI for such a task.    We can learn about this by first exploring the workflow a teacher must currently use to consume a remotely provided activity, identifying problem areas and areas we might be able to improve. How does this process change when the teacher also wants to create the remote tool as part of the process?    These are just some things we'd like to explore in a little depth and to gain answers to:   # Does the client need to actively create the External tool instance? Can this be programmatically created? Currently, this is always how a client/consumer sets up their tool. If we're asking the remote site to create an activity by type (e.g. 'Create a student quiz instance for me to use'), then asking the teacher to set up an external tool might be a step we don't want/need.   # How will the teacher configure the activity once it has been created on the provider site? Also see MDL-69322 which investigates settings cog access of activities provided via an LTI provider - that task does not need to be researched here.   # Does LTI provide any means to return something like a 'configuration link/url', which might allow us to get access to the settings page like this?   # What do the above questions mean in terms of a workflow to set up a remote activity like this? What work would be required to streamline the process and how would it help the end user experience?"""
"MDL-69324","Task","External Tool (IMS-LTI)",3,"Learn about remote configuration challenges by creating a simple, remote setup proof of concept using LTI 1.1: Activity creation","""*{color:#FF0000}This issue deals with the activity creation problem only. Only those points marked in red.  {color}*   We want to discover as must as we can about what's involved in programmatically setting up an activity, in a course, as an LTI provider, so that a consuming site may use this.    The way this normally works when Moodle is acting as a provider (assuming human setup) is as follows:   # Admin enables LTI enrolment method   # Teacher creates an activity   # Teacher creates an LTI enrol enrolment instance, selecting the activity (there are several options when doing this, via the enrolment instance form)    Programmatically creating this raises an array of questions, but we'd like to attempt to do this in order to learn more about what might/might not be problematic.    At the end of this task, we should be able to make a web request to create an instance of an activity and make that activity available via LTI enrolment, as a provider. We want to document all limitations, assumptions, etc that we face along the way. This will be critical in identifying viability of LTI for such a task.    These are just some of the things we'll want to experiment with and document the answers to. There will surely be other facts learned along the way too, which should also be documented clearly.   # {color:#FF0000}How can we create an activity without knowing which fields are required by the activity (i.e. what fields would be mandatory if manually creating the instance)?{color}   # {color:#FF0000}Is there the possibility of creating the instance with defaults for these required fields? If so, how?{color}   # Are we going to be able to support configuration of any of the enrolment method specific settings? These are things which normally be set up on the enrolment method, by the teacher setting up the method. Can we use sensible defaults here? If so, what does that mean for clients consuming the provided activity?   # What does the client absolutely *need* to consume the provided tool? Secret, key, etc?   # How are we going to pass the required information back to the client, assuming creation of the provided activity was successful?   # What access/permissions problems can we foresee? E.g. if a teacher in """"Consumer Site"""" wants to create a provider activity in """"Provider Site"""", how are they authenticating? Will they have an account in the provider site? Do they need any new capabilities to remotely create activities as providers like this?"""
"MDL-69322","Task","External Tool (IMS-LTI)",3,"Investigate which core activities can be served via LTI whilst allowing remote setup as a teacher","""Assignment does this by granting full site access via iframe, so a consumer site's teacher can fully configure the activity via its settings cog.    We need to check all the other core activity types to confirm they behave the same way."""
"MDL-69319","Bug","External Tool (IMS-LTI)",1,"LTI external tests clean up","""There are a few issues here which should be fixed:    1. A number of the tests for external.php in mod/lti/tests/externallib_test.php don't clean the return value before making assertions about the return. We should always call clean_returnvalue().    2. The test exploits the setUp method to create courses and enrolments which are then only used in a couple of tests. This should be achieved via a helper method instead.    3. A number of tests check for exceptional behaviour using a try/catch in the test. We should replace this with expectException() calls.    4. There are a number of unused vars."""
"MDL-69336","Bug","General",0,"Collapsing columns in dynamic tables no longer functions","""When clicking the icons to collapse columns (such as on the course participants page), the request is sent, but no change is made to the table.    It appears that when some code was refactored so that resetting table preferences became dynamic, the call to set the hiding preferences was accidentally removed, so the request is received, but nothing in the backend actions the hiding of the column(s).    It appears that _$this->set_hide_show_preferences()_ needs to be called [where the other preferences are being set|https://github.com/moodle/moodle/blob/master/lib/tablelib.php#L1460], however that doesn't seem to be a complete fix, because un-hiding hidden columns results in their widths being too narrow, which will also need to be corrected.    There is also a JS error being thrown in the console after hiding/un-hiding columns."""
"MDL-69394","Bug","Accessibility|Calendar",0,"Insufficient colour contrast for calendar event colour indicators","""The calendar event colour indicators don't have sufficient colour contrast.  || Event type || Colour || Ratio (white BG) || Ratio (as BG vs blue text) ||  | User | #dce7ec | 1.25 | 3.64 |  | Group | #fee7ae | 1.21 | 3.76 |  | Course | #ffd3bd | 1.37 | 3.33 |  | Category | #d8bfd8 | 1.69 | 2.69 |  | Site | #d6f8cd | 1.15 | 3.96 |     !screenshot-1.png|thumbnail!   """
"MDL-69391","Bug","Accessibility|HTML and CSS",2,"Some dropdown menus have insufficient colour contrast between text and background ","""Some examples:  # Calendar page: Course dropdown  # Navigation menu items (e.g. Language menu)    There might be more. Probably good to check out other action menus or select elements."""
"MDL-69389","Bug","Accessibility",0,"Insufficient colour contrast between link text and normal text","""According to https://www.w3.org/TR/2008/NOTE-WCAG20-TECHS-20081211/G183, links and normal text should have at least a colour contrast ratio of 3:1.     From the WebAIM blog entry """"[WCAG 2.0 and Link Colors|https://webaim.org/blog/wcag-2-0-and-link-colors/]"""":  {quote}  So if you combine these two requirements, in order to be Level AA conformant, your page must have all of the following:    A 4.5:1 contrast between the non-link text color and the background.  A 4.5:1 contrast between the link text color and the background.  A 3:1 contrast between the link text color and the surrounding non-link text color.  {quote}    Currently, the normal text has a colour of """"{{#373A3C}}"""" while links have a colour of """"{{#1177D1}}"""" which results in a colour contrast ratio of 2.5:1.      !example-login-page.png|thumbnail! """
"MDL-69387","Bug","Accessibility|Course|Course completion",0,"Completion checkbox images don't have sufficient colour contrast","""The course completion checkbox images in the course page lack colour contrast and do not pass the WCAG AA requirement for colour contrast ratio for non-text elements of 3:1.     Currently, they have a fill of """"{{#999999}}"""" which has a colour contrast ratio of 2.84:1. Changing this to a bit darker colour of """"{{#949494}}"""" gives us a contrast ratio of 3.03:1.    Some checkbox images with blue checkmarks (e.g. pix/i/completion-manual-y.svg) have a fill colour of """"{{#76A1F0}}"""" which has a contrast ratio of  2.58.1. Changing this to a darker colour of """"{{#6393EE}}"""" gives us a colour contrast ratio of 3.02:1 against a white background. """
"MDL-69525","Bug","JavaScript",3,"Toggle-all checkbox publishes multiple events with an inconsistent data","""When selecting/deselecting the toggle-all (parent) checkbox, multiple events with an inconsistent data are being fired. This makes it really hard for a subscriber to properly utilize the data. Also, this causes performance issues which are noticeable when attempting to bulk select larger set of data (takes ~ 5 sec to bulk select ~ 1000 records).    Ideally, a single event should be fired after changing the state of the toggle-all (parent) checkbox and it's data should reflect the final state of the child checkboxes in the specific toggle group.    Steps to reproduce:   # Unzip the attached local plugin into the /local/ directory of your moodle installation   # Login as Admin.   # Install the plugin and go to PATHTOMOODLEINSTANCE/local/checkboxtoggleallevents/index.php   # Click on the 'Toggle-all' (parent) checkbox for """"Checkbox Group 1"""" in order to select all checkboxes in Group 1.   # Open the console in the browser, the fired events should be captured in the console.    Result:    *Actual:* 7 events are being fired and captured in the console.    *Expected*: 1 event should be fired with data which reflects the current state of the specific toggle group (ex. all 3 child checkboxes from the toggle group """"participants-table option-1"""" are selected)"""
"MDL-69546","Task","LTI provider",1,"Investigate deep linking options","""This is just an issue to summarize discussions about deep linking, and how it might be used to pick course modules from a shared course and any other potential uses in the Moodle tool case."""
"MDL-69560","New Feature","Course",3,"Add ""Download course content"" option to course UI","""The plan for this project is to add a single option to either:  # the course settings menu (for teachers); or  !69560-student-menu.png|thumbnail!   # instead of the course settings cog if there is no menu (for students).  !69560-teacher-menu.png|thumbnail!     Need to confirm how this behaves on theme_classic too.    After selecting the download option, a modal will open to confirm the download:  !69560-modal.png|thumbnail!     Need to confirm whether we can easily tell the size of the downloaded content - this may need an additional call adding to the {{coursecontentexport\exporter}} API.    Need to respect both the course + site settings (MDL-69559, MDL-69561) and user capability to download content.    New capability:  Name: {{moodle/course:downloadcontentexport}}  Captype: read  contextlevel: course  archetype: student + teacher + editingteacher + manager = allow"""
